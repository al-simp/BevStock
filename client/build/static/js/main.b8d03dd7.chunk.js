(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{188:function(e,t,a){},190:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(19),l=a.n(c),s=(a(86),a(2)),o=a.n(s),u=a(4),m=a(3),i=a(13),d=a(7),p=a(5),f=(a(88),a(89),a(67)),b=a(8),E=a.n(b),h=function(e){var t=e.weekData,a=e.weekLabels,c=e.allTimeData,l=e.allTimeLabels,s=Object(n.useState)([]),o=Object(m.a)(s,2),u=o[0],i=o[1],d=Object(n.useState)([]),p=Object(m.a)(d,2),b=p[0],E=p[1],h=Object(n.useState)([]),k=Object(m.a)(h,2),v=k[0],g=k[1],y=function(){i(t),E(a),g(!1)};return Object(n.useEffect)((function(){y()}),[]),r.a.createElement("div",null,r.a.createElement("div",{className:"btn-group btn-group-sm float-right",role:"group","aria-label":"Basic example"},r.a.createElement("button",{type:"button",onClick:y,className:v?"btn btn-primary":"btn btn-primary active"},"This Week"),r.a.createElement("button",{type:"button",onClick:function(){i(c),E(l),g(!0)},className:v?"btn btn-primary active":"btn btn-primary"},"All Time")),r.a.createElement("h6",null,"Top Sellers"),r.a.createElement(f.Bar,{data:{labels:b,datasets:[{data:u}]},options:{legend:{display:!1},title:{display:!1,position:"left",text:"Top Selling Products"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}}))},k=a(24),v=(a(65),function(e){var t=e.levels;return r.a.createElement("button",{className:"btn btn-info",onClick:function(){var e=new k.default("p","pt");e.autoTable({head:[["Product","Size","Category","Quantity"]],body:t.map((function(e){return[e.name,e.size,e.category,e.quantity]}))}),e.save("generated.pdf")}},"Generate PDF Report")}),g=function(e){var t=e.levels.filter((function(e){return e.sum-e.avg_weekly_sales<0})).map((function(e){return{id:e.product_id,name:e.product_name,size:e.product_size,category:e.product_category,quantity:Math.abs(Number(e.sum-e.avg_weekly_sales))+e.avg_weekly_sales}}));return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-primary btn-sm float-right mb-2","data-toggle":"modal","data-target":"#predictedOrder"},"View Predicted Order"),r.a.createElement("div",{className:"modal",id:"predictedOrder"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Predicted Order")),r.a.createElement("div",{className:"modal-body"}),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Quantity"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.size),r.a.createElement("td",null,e.category),r.a.createElement("td",null,e.quantity))})))),r.a.createElement("div",{className:"modal-footer"},E.a.isEmpty(t)?null:r.a.createElement(v,{levels:t}),r.a.createElement("button",{className:"btn btn-success","data-dismiss":"modal"},"Close"))))))},y=function(e){var t=e.levels;return r.a.createElement("div",null,r.a.createElement(g,{levels:t}),r.a.createElement("h6",{className:"mb-3"},"Low Product Alerts"),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Avg Weekly Sales"),r.a.createElement("th",null,"Quantity"))),r.a.createElement("tbody",null,t.map((function(e){if(e.avg_weekly_sales>Number(e.sum))return r.a.createElement("tr",{key:e.product_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.avg_weekly_sales),0===Number(e.sum)?r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-pill badge-danger"},"Out Of Stock")):r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-pill badge-warning"},"Running Low: ",e.sum)))})))))},j=function(e){var t=e.stocktake,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],s=c[1],i=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,s(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){i()}),[]),t?r.a.createElement("div",null,"Stockatke in progress"):r.a.createElement("div",null,r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Area"),r.a.createElement("th",null,"View/Edit"))),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement("tr",{key:e.stocklist_id},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,r.a.createElement("a",{className:"badge badge-pill badge-primary",href:"viewedit/".concat(e.stocklist_id)},"View/Edit")))})))))},O=function(e){var t=e.stocktake;return r.a.createElement("div",null,r.a.createElement("h6",null,"Stocktaking"),r.a.createElement(j,{stocktake:t}))},N=a(35),x=a.n(N),S=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/stocktakes",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",null,r.a.createElement("h6",null,"Previous Stocktake Records"),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stocktake"),r.a.createElement("th",null,"ID"),r.a.createElement("th",null,"View"))),r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:e.stocktake_id},r.a.createElement("td",null,r.a.createElement(x.a,{date:e.stocktake_date,format:"DD/MM/YYYY HH:mm"})),r.a.createElement("td",null,e.stocktake_id),r.a.createElement("td",null,r.a.createElement("a",{className:"badge badge-pill badge-primary",href:"/stocktakerecord/".concat(e.stocktake_id)},"View")))})))))},w=function(e){e.setAuth;var t=e.name,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)([]),p=Object(m.a)(i,2),f=(p[0],p[1],Object(n.useState)([])),b=Object(m.a)(f,2),k=b[0],v=b[1],g=Object(n.useState)([]),j=Object(m.a)(g,2),N=j[0],x=j[1],w=Object(n.useState)([]),_=Object(m.a)(w,2),C=_[0],T=_[1],I=Object(n.useState)([]),P=Object(m.a)(I,2),A=P[0],L=P[1],D=Object(n.useState)([]),G=Object(m.a)(D,2),J=G[0],B=G[1],M=Number(localStorage.getItem("stocktake")),R=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/levels/".concat(localStorage.getItem("laststocktake")),{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,v(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/topsellers/".concat(localStorage.getItem("laststocktake")),{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,x(a.map((function(e){return e.product_name}))),T(a.map((function(e){return e.sales}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/alltimetopsellers/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,L(a.map((function(e){return e.product_name}))),B(a.map((function(e){return e.sum}))),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),z=localStorage.getItem("role");return Object(n.useEffect)((function(){R(),Q(),0!==M&&s(!0),F()}),[]),"User"===z?r.a.createElement(d.a,{to:"/userdashboard"}):r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom"},r.a.createElement("h1",{className:"h2"},"Welcome back, ",t,"!"),r.a.createElement("div",{className:"btn-toolbar mb-2 mb-md-0"})),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},E.a.isEmpty(N)||E.a.isEmpty(C)?r.a.createElement("div",null,"Loading"):r.a.createElement(h,{weekData:C,weekLabels:N,allTimeData:J,allTimeLabels:A})),r.a.createElement("div",{className:"col-md-6"},E.a.isEmpty(k)?r.a.createElement("div",null,"Loading..."):r.a.createElement(y,{levels:k}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-6"},r.a.createElement(S,null)),r.a.createElement("div",{className:"col-md-6"},r.a.createElement(O,{stocktake:l})))))))},_=a(10),C=a(18),T=function(e){var t=e.setAuth,a="BKsYaIk2PtD5vOgyAPKMdbAZjRxO_Ob6uh9pexmSN0B47Ju4R1zW1rJuWhTlTd0A6w8visaRHoznpODDxSInlw0",c=Object(n.useState)({email:"",password:""}),l=Object(m.a)(c,2),s=l[0],i=l[1],d=s.email,f=s.password,b=function(e){i(Object(C.a)(Object(C.a)({},s),{},Object(_.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,n={email:d,password:f},e.next=5,fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:if(!(c=e.sent).token){e.next=22;break}return localStorage.setItem("token",c.token),localStorage.setItem("role",c.role),localStorage.setItem("name",c.name),e.next=15,g();case 15:return e.next=17,j();case 17:E.a.isEmpty(localStorage.getItem("stocktake"))||"Admin"!==localStorage.getItem("role")?k():N(),t(!0),p.a.success("Login successful!"),e.next=24;break;case 22:t(!1),p.a.error(c);case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(1),console.error(e.t0.message);case 29:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}();function k(){return v.apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/duties",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent.length>0&&N(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocktake/activestocktake",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0&&(localStorage.setItem("stocktake",a[0].stocktake_id),localStorage.setItem("stocktakedate",a[0].stocktake_date)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/latest",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,localStorage.setItem("laststocktake",a[0].stocktake_id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var N=function(){"serviceWorker"in navigator&&function(){return x.apply(this,arguments)}().catch((function(e){console.error(e)}))};function x(){return(x=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("registering service worker..."),e.next=3,navigator.serviceWorker.register("worker.js",{scope:"/"});case 3:return t=e.sent,console.log("Service Worker Registered....."),console.log("Registering push...."),e.next=8,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:S(a)});case 8:return n=e.sent,console.log("push registered.."),console.log("sending push"),e.next=13,fetch("/subscribe/".concat(localStorage.getItem("role")),{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}});case 13:console.log("push sent...");case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(t),n=new Uint8Array(a.length),r=0;r<a.length;++r)n[r]=a.charCodeAt(r);return n}return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"m-5"},r.a.createElement("h1",{className:"text-center my-5"},"Login"),r.a.createElement("form",{onSubmit:h},r.a.createElement("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:d,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",onChange:function(e){return b(e)}}),r.a.createElement("button",{className:"btn btn-success btn-block"},"Submit"))))},I=function(){return r.a.createElement("div",{className:"jumbotron mt-5"},r.a.createElement("h1",null,"Welcome to BevStock"),r.a.createElement("p",null,"Sign In to continue"),r.a.createElement(i.b,{to:"/login",className:"btn btn-primary"},"Login"))},P=function(e){var t=e.setListsChange,a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],s=c[1],i=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,(n=new Headers).append("Content-Type","application/json"),n.append("token",localStorage.token),r={stocklist_name:l},e.next=8,fetch("/stocklists/add",{method:"POST",headers:n,body:JSON.stringify(r)});case 8:return c=e.sent,e.next=11,c.json();case 11:t(!0),s(""),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("form",{className:"d-flex",onSubmit:i},r.a.createElement("input",{type:"text",placeholder:"add new stock area",className:"form-control",value:l,onChange:function(e){return s(e.target.value)}}),r.a.createElement("button",{className:"btn btn-success "},"Add")))},A=function(e){var t=e.name,a=e.stocklist_id,c=e.setListsChange,l=Object(n.useState)([]),s=Object(m.a)(l,2),i=s[0],d=s[1],p=localStorage.getItem("stocktake"),f=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/teammanagement/users",{method:"GET"});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,d(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();function b(){return(b=Object(u.a)(o.a.mark((function e(t,n){var r,l,s,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=document.getElementById(n.user_id).value,console.log(n,r),l=n.user_id,document.getElementById("id".concat(a)).setAttribute("style","display: none"),s=document.getElementsByClassName("modal-backdrop"),document.body.removeChild(s[0]),e.prev=8,u={stocklist_id:a,stocktake_id:p,id:l,userMessage:r},e.next=12,fetch("/stocklists/assignlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});case 12:return m=e.sent,e.next=15,m.json();case 15:c(!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(8),console.error(e.t0.message);case 21:case"end":return e.stop()}}),e,null,[[8,18]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#id".concat(a)},"Assign"),r.a.createElement("div",{className:"modal",id:"id".concat(a)},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},t)),r.a.createElement("div",{className:"modal-body"}),r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Message"))),r.a.createElement("tbody",null,i.map((function(e){return r.a.createElement("tr",{key:e.user_id},r.a.createElement("td",null,e.user_name),r.a.createElement("td",null,r.a.createElement("form",{onSubmit:function(t){!function(e,t){b.apply(this,arguments)}(t,e)}},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-7"},r.a.createElement("textarea",{className:"form-control",id:"".concat(e.user_id)})),r.a.createElement("div",{className:"col"},r.a.createElement("button",{className:"btn btn-success float-right",type:"submit"},"Assign"))))))})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn btn-success","data-dismiss":"modal"},"Close"))))))},L=function(e){var t=e.allLists,a=e.setListsChange,c=e.stocktake,l=e.stocktake_id,s=Object(n.useState)([]),d=Object(m.a)(s,2),p=d[0],f=d[1],b=Object(n.useState)([]),E=Object(m.a)(b,2),h=E[0],k=E[1],v=Object(n.useState)([]),g=Object(m.a)(v,2),y=g[0],j=g[1],O=Object(n.useState)([]),N=Object(m.a)(O,2),x=N[0],S=N[1],w=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={stocktake_id:l},e.next=4,fetch("/stocklists/assignedlists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,console.log(n),f(n),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={stocktake_id:l},e.next=4,fetch("/stocklists/unassignedlists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,k(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t,stocktake_id:l},e.next=4,fetch("/stocklists/unassignuser",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:a(!0),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/delete/".concat(t),{method:"DELETE",headers:{token:localStorage.token}});case 3:j(y.filter((function(e){return e.stocklist_id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:a(!0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S(l),j(t),a(!1),c&&(w(),_())}),[t]),c?r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,"Unassigned Stock Areas"),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Area"),r.a.createElement("th",null,"Assign to team member"),r.a.createElement("th",null,"Count"))),r.a.createElement("tbody",null,h.map((function(e){return r.a.createElement("tr",{key:e.stocklist_id},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,r.a.createElement(A,{name:e.stocklist_name,stocklist_id:e.stocklist_id,setListsChange:a})),r.a.createElement("td",null,r.a.createElement(i.b,{to:"count/".concat(e.stocklist_id,"/").concat(x),className:"btn btn-primary"},"Count")))}))))),r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,"Assigned Stock Areas"),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Area"),r.a.createElement("th",null,"Assigned to"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Message"))),r.a.createElement("tbody",null,p.map((function(e){return r.a.createElement("tr",{key:e.stocklist_id},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,e.user_name),e.completed?r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-pill badge-success"},"Completed")):r.a.createElement("td",null,r.a.createElement("span",{className:"badge badge-pill badge-warning"},"In Progress"),r.a.createElement("button",{href:"#",className:"badge badge-pill badge-danger",onClick:function(t){return C(e.stocklist_id)}},"Unassign")),r.a.createElement("td",null,e.user_message))}))))))):r.a.createElement("table",{className:"table text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Area"),r.a.createElement("th",null,"Delete"),r.a.createElement("th",null,"View/Edit Products"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.stocklist_id},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return T(e.stocklist_id)}},"Delete")),r.a.createElement("td",null,r.a.createElement(i.b,{to:"viewedit/".concat(e.stocklist_id),className:"btn btn-primary"},"View/Edit")))}))))},D=function(e){var t=e.setAuth,a=Object(n.useState)([]),c=Object(m.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)(!1),d=Object(m.a)(i,2),f=d[0],b=d[1],E=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,s(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){E(),b(!1)}),[f]),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),p.a.success("Logged out succsessfully!")}(e)}},"Logout"),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Stock Areas"),r.a.createElement("div",null,r.a.createElement(P,{setListsChange:b})))),r.a.createElement("div",null,r.a.createElement(L,{allLists:l,setListsChange:b})))},G=function(e){var t=e.member,a=e.setTeamChange,c=Object(n.useState)(t.user_name),l=Object(m.a)(c,2),s=l[0],i=l[1],d=Object(n.useState)(t.user_email),f=Object(m.a)(d,2),b=f[0],E=f[1],h=function(e,t){i(e),E(t)},k=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={name:s,email:b},(r=new Headers).append("Content-Type","application/json"),r.append("token",localStorage.token),e.next=7,fetch("/teammanagement/update/".concat(t),{method:"PUT",headers:r,body:JSON.stringify(n)});case 7:p.a.success("Details updated successfully!"),a(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-warning","data-toggle":"modal","data-target":"#id".concat(t.user_id)},"Edit"),r.a.createElement("div",{className:"modal",id:"id".concat(t.user_id),onClick:function(){return function(){return E(t.user_email)}}},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Edit Details"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal",onClick:function(){return h(t.user_name,t.user_email)}},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:function(e){return i(e.target.value)}}),r.a.createElement("input",{type:"text",className:"form-control mt-1",value:b,onChange:function(e){return E(e.target.value)}})),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{type:"button",className:"btn btn-warning","data-dismiss":"modal",onClick:function(e){return k(t.user_id)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-danger","data-dismiss":"modal",onClick:function(){return h(t.user_email,t.user_name)}},"Close"))))))},J=function(e){var t=e.allTeamMembers,a=e.setTeamChange,c=Object(n.useState)([]),l=Object(m.a)(c,2),s=l[0],i=l[1],d=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/teammanagement/delete/".concat(t),{method:"PUT",headers:{token:localStorage.token}});case 3:i(s.filter((function(e){return e.user_id!==t}))),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0.message);case 9:a(!0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("table",{className:"table mt-5 text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Edit"),r.a.createElement("th",null,"Delete"))),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.user_id},r.a.createElement("td",null,e.user_name),r.a.createElement("td",null,e.role),r.a.createElement("td",null,r.a.createElement(G,{member:e,setTeamChange:a})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return d(e.user_id)}},"Delete")))})))))},B=function(e){var t=e.setTeamChange,a=Object(n.useState)({email:"",password:"",name:""}),c=Object(m.a)(a,2),l=c[0],s=c[1],i=l.email,d=l.password,f=l.name,b=function(e){s(Object(C.a)(Object(C.a)({},l),{},Object(_.a)({},e.target.name,e.target.value)))},E=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,c,l,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("myModal"),a.preventDefault(),n.setAttribute("style","display: none"),r=document.getElementsByClassName("modal-backdrop"),document.body.removeChild(r[0]),c=document.getElementById("userrole"),l=c.value,e.prev=7,u={email:i,password:d,name:f,role:l},e.next=11,fetch("/teammanagement/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});case 11:return m=e.sent,e.next=14,m.json();case 14:p.a.success("Registered Successfully!"),s({email:"",password:"",name:""}),t(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),console.error(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-info btn-lg","data-toggle":"modal","data-target":"#myModal"},"Add team member"),r.a.createElement("div",{id:"myModal",className:"modal fade",role:"dialog"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Add new team member"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"email",name:"email",placeholder:"email",className:"form-control my-3",value:i,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"password",name:"password",placeholder:"password",className:"form-control my-3",value:d,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"text",name:"name",placeholder:"name",className:"form-control my-3",value:f,onChange:function(e){return b(e)}}),r.a.createElement("select",{className:"form-control my-3",id:"userrole"},r.a.createElement("option",{value:"User"},"Bar Staff"),r.a.createElement("option",{value:"Admin"},"Manager")),r.a.createElement("button",{className:"btn btn-success btn-block"},"Submit")))))))},M=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(m.a)(l,2),i=s[0],d=s[1],p=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/teammanagement/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p(),d(!1)}),[i]),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},"F",r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Team Management"),r.a.createElement(B,{setTeamChange:d}))),r.a.createElement("div",null,r.a.createElement(J,{allTeamMembers:a,setTeamChange:d})))},R=a(78),Q=function(e){var t=e.listId,a=e.setQuantityChange,c=Object(n.useState)([]),l=Object(m.a)(c,2),s=l[0],i=l[1],d=Object(n.useState)(!1),f=Object(m.a)(d,2),b=f[0],E=f[1],h=Number(localStorage.getItem("stocktake")),k=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/products");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,i(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){0!==h&&E(!0),k()}));var v=s.map((function(e){return{label:e.product_name,value:e.product_id}})),g=Object(n.useState)([]),y=Object(m.a)(g,2),j=y[0],O=y[1],N=function(){var e=Object(u.a)(o.a.mark((function e(n){var r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,e.prev=1,c={productId:r,listId:t,stockId:h},e.next=5,fetch("/stocklists/addproductstocktake",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:return l=e.sent,e.next=8,l.json();case 8:a(!0),p.a.success("Products added succesfully"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(o.a.mark((function e(n){var r,c,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,e.prev=1,c={productId:r,listId:t},e.next=5,fetch("/stocklists/addproduct",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});case 5:return l=e.sent,e.next=8,l.json();case 8:p.a.success("Products Added Successfully!"),a(!0),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),b?j.forEach(N):j.forEach(x);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("form",{onSubmit:S},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement(R.a,{options:v,value:j,onChange:O,labelledBy:"Select"})),r.a.createElement("div",{className:"col-4"},r.a.createElement("button",{className:"btn btn-success"},"Add")))))},F=a(69),z=a.n(F),V=function(e){var t=e.product,a=e.setProductsChange,c=e.stocktakeid,l=e.setQuantity,s=e.setQuantityChange,i=Object(n.useState)(0),d=Object(m.a)(i,2),p=d[0],f=d[1],b=Object(n.useState)(0),E=Object(m.a)(b,2),h=E[0],k=E[1],v=Number(c),g=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={item:t,stocktake:v,tempQuantity:h},console.log(n),e.next=5,fetch("/stocktake/count",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:c=e.sent,l(c.rows[0].quantity),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:k(0),a(!0),s(!0);case 18:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[h]),r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#id".concat(t.product_stocklist_id)},"Count"),r.a.createElement("div",{className:"modal",id:"id".concat(t.product_stocklist_id)},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},t.product_name)),r.a.createElement("div",{className:"modal-body"}),r.a.createElement("div",{className:"container"},r.a.createElement("h5",null,"Add partial"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("form",null,r.a.createElement("input",{value:p,onChange:function(e){return function(e){f(Number(e.target.value))}(e)},name:"partial",className:"form-control mb-4",type:"number",placeholder:"0.00",step:"0.05",min:"0",max:"1.0"}))),r.a.createElement("div",{className:"col-sm"},r.a.createElement("button",{className:"btn btn-info",onClick:function(){k(Number(h+p)),f(0)}},"Add"))),r.a.createElement("h5",null,"Add full"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("button",{className:"btn btn-danger",onClick:function(){k(Number(h-1))}},r.a.createElement("h4",null,"-"))),r.a.createElement("div",{className:"col-sm"},r.a.createElement("img",{src:z.a,alt:"Bottle Image",height:"140",width:"140"})),r.a.createElement("div",{className:"col-sm"},r.a.createElement("button",{className:"btn btn-success",onClick:function(){k(Number(h+1))}},r.a.createElement("h4",null,"+")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"}),r.a.createElement("div",{className:"col-sm"},h),r.a.createElement("div",{className:"col-sm"}))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn btn-success","data-dismiss":"modal",onClick:function(e){return g(t.product_stocklist_id)}},"Add"))))))},Y=a(70),W=a(71),U=a(36),H=a(79),q=a(76),K=a(77),Z=function(e){var t=Object(n.useState)({}),a=Object(m.a)(t,2),c=a[0],l=a[1],s=e.result,i=e.hasScanned,d=e.hasResult,p=e.setPairBool,f=e.setProductsChange,b=e.setQuantity,h=localStorage.getItem("stocktake"),k=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===s||d||i){e.next=21;break}return console.log("result",s,"scanned",i,"hasResult",d),p("hasScanned",!0),e.prev=3,t={result:s,stocktake:h},e.next=7,fetch("/stocktake/productfromid",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 7:return a=e.sent,e.next=10,a.json();case 10:n=e.sent,console.log(n.length),l(n[0]),console.log(n),p("hasResult",!0),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),console.error(e.t0.message),p("hasScanned",!1);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){d||k()}),[s,c]),E.a.isEmpty(c)?r.a.createElement("h1",null,"No bottle found"):r.a.createElement("div",null,r.a.createElement(V,{product:c,stocktakeid:h,setProductsChange:f,setQuantity:b}))},X=function(e){Object(H.a)(a,e);var t=Object(q.a)(a);function a(e){var n;return Object(Y.a)(this,a),(n=t.call(this,e)).state={hasResult:!1,hasScanned:!1,delay:100,result:null},n.handleScan=n.handleScan.bind(Object(U.a)(n)),n}return Object(W.a)(a,[{key:"handleScan",value:function(e){this.setState({result:e})}},{key:"handleError",value:function(e){console.error(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.result,n=t.hasResult,c=t.hasScanned;return r.a.createElement("div",null,r.a.createElement(K.a,{delay:this.state.delay,style:{height:240,width:320},onError:this.handleError,onScan:this.handleScan}),r.a.createElement(Z,{result:a,hasResult:n,hasScanned:c,setPairBool:function(t,a){e.setState(Object(_.a)({},t,a))},setProductsChange:this.props.setProductsChange,setQuantity:this.props.setQuantity}))}}]),a}(n.Component),$=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),i=Object(m.a)(s,2),d=i[0],p=i[1],f=Object(n.useState)(!1),b=Object(m.a)(f,2),E=(b[0],b[1]),h=Object(n.useState)(0),k=Object(m.a)(h,1)[0],v=Object(n.useState)(!1),g=Object(m.a)(v,2),y=g[0],j=g[1],O=Object(n.useState)(!1),N=Object(m.a)(O,2),x=N[0],S=N[1],w=e.match.params.id,_=e.match.params.stocktakeid,C=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/get/".concat(t),{method:"GET",headers:{token:localStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,l(n.rows[0].stocklist_name),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t,stocktake:a},e.next=4,fetch("/stocktake/liststocktake",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:c=e.sent,p(c),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){C(w),T(w,_),S(!1)}),[x]),y?r.a.createElement("div",null,r.a.createElement(X,{setProductsChange:E,setQuantity:k}),r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(){return j(!1)}},"QrScan")):r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(){return j(!0)}},"QrScan"),r.a.createElement("h1",{className:"display-3"},c),r.a.createElement("div",null,r.a.createElement(Q,{listId:w,setQuantityChange:S}))),r.a.createElement("div",null,r.a.createElement("table",{className:"table text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Quantity"),r.a.createElement("th",null,"Count"))),r.a.createElement("tbody",null,d.map((function(e){return r.a.createElement("tr",{key:e.product_stocklist_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.quantity),r.a.createElement("td",null,r.a.createElement(V,{product:e,setProductsChange:E,stocktakeid:_,setQuantity:k,setQuantityChange:S})))}))))))},ee=function(e){var t=e.product_id,a=e.id,c=e.name,l=Object(n.useState)([]),s=Object(m.a)(l,2),i=s[0],d=s[1],p=t,f=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={id:a,product:p},e.next=4,fetch("/inventory/breakdown",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)});case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,d(r),console.log(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0.message);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn btn-info","data-toggle":"modal","data-target":"#id".concat(t)},"View Breakdown"),r.a.createElement("div",{className:"modal",id:"id".concat(t)},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},c)),r.a.createElement("div",{className:"modal-body"}),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Area"),r.a.createElement("th",null,"Quantity"))),r.a.createElement("tbody",null,i.map((function(e){return r.a.createElement("tr",{key:e.stocklist_name},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,e.sum))})))),r.a.createElement("div",{className:"modal-footer"},r.a.createElement("button",{className:"btn btn-success","data-dismiss":"modal"},"Close"))))))},te=function(e){var t=e.inventory;return r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("button",{className:"btn btn-success",onClick:function(){var e=new k.default("p","pt");e.autoTable({head:[["Product","Size","Category","Quantity"]],body:t.map((function(e){return[e.product_name,e.product_size,e.product_category,e.sum]}))}),e.save("generated.pdf")}},"Generate PDF Report"))},ae=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),i=Object(m.a)(s,2),d=i[0],p=i[1],f=e.match.params.id,b=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/inventory/records/".concat(f),{method:"GET",headers:{token:localStorage.token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=c.filter((function(e){return e.product_name.toLowerCase().includes(d.toLowerCase())}));return Object(n.useEffect)((function(){b()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Inventory"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Search",onChange:function(e){return p(e.target.value)}})))),r.a.createElement("div",null,r.a.createElement("table",{className:"table text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Inventory"),r.a.createElement("th",null))),r.a.createElement("tbody",null,h.map((function(e){return r.a.createElement("tr",{key:e.product_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.sum),r.a.createElement("td",null,r.a.createElement(ee,{product_id:e.product_id,id:f,name:e.product_name})))}))))),console.log(c),E.a.isEmpty(c)?null:r.a.createElement(te,{inventory:c})))},ne=function(e){var t=e.setAuth,a=Object(n.useState)(""),c=Object(m.a)(a,2),l=c[0],s=c[1],d=Object(n.useState)({}),p=Object(m.a)(d,2),f=p[0],b=p[1],h=Object(n.useState)(!1),k=Object(m.a)(h,2),v=k[0],g=k[1];function y(){return(y=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocktake/activestocktake",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0?(b(a),localStorage.setItem("stocktake",a[0].stocktake_id),localStorage.setItem("stocktakedate",a[0].stocktake_date)):console.log("no stocktake in progress"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(){return(j=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/duties",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0&&g(!0),console.log(a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function O(){return(O=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/dashboard/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log(a),localStorage.setItem("user",a.user_id),s(a.user_name),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0.message);case 15:console.log(l);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){j.apply(this,arguments)}(),function(){O.apply(this,arguments)}(),function(){y.apply(this,arguments)}()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("main",{role:"main"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(e){return function(e){e.preventDefault(),localStorage.clear(),t(!1)}(e)}},"Logout"),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Hello, ",l,"!"),r.a.createElement("p",null,"Welcome to your BevStock user dashboard."))),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-4"},r.a.createElement("h2",null,"Stocktaking"),E.a.isEmpty(f)?r.a.createElement("p",null,"No stocktake in progress"):r.a.createElement("div",null,r.a.createElement("p",null,"Stocktake in progress :"," ",localStorage.getItem("stocktakedate")),v?r.a.createElement("div",null,r.a.createElement("p",null,"You have been assigned stocktaking duties"),r.a.createElement("p",null,r.a.createElement(i.b,{className:"btn btn-secondary",to:"/userstocktaking"},"View"))):r.a.createElement("p",null,"You haven't been assigned any stocktakting duties")))))))},re=function(e){var t=e.allLists,a=e.setListsChange,c=(e.stocktake,e.stocktake_id),l=Object(n.useState)([]),s=Object(m.a)(l,2),d=s[0],p=s[1],f=Object(n.useState)([]),b=Object(m.a)(f,2),E=b[0],h=b[1];function k(){return(k=Object(u.a)(o.a.mark((function e(){var t,a,n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("stocktake"),a=localStorage.getItem("user"),n={id:a,stocktake_id:t},console.log(n),e.next=7,fetch("/stocklists/userassignedlists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 7:return r=e.sent,e.next=10,r.json();case 10:c=e.sent,console.log(c),p(c),c.length>0&&p(c),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("".concat(t)).value,e.prev=1,r={id:t,stocktakeInstance:E,message:n},e.next=5,fetch("/stocktake/markascomplete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 5:return c=e.sent,e.next=8,c.json();case 8:a(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){h(c),a(!1),function(){k.apply(this,arguments)}()}),[t]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement("h4",null,"Your Assigned Stock Areas"),r.a.createElement("table",{className:"table table-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Stock Area"),r.a.createElement("th",null,"Count"),r.a.createElement("th",null,"Manager Message"),r.a.createElement("th",null,"Your Message"),r.a.createElement("th",null,"Status"))),r.a.createElement("tbody",null,console.log(d),d.map((function(e){return r.a.createElement("tr",{key:e.stocklist_id},r.a.createElement("td",null,e.stocklist_name),r.a.createElement("td",null,r.a.createElement(i.b,{to:"count/".concat(e.stocklist_id,"/").concat(E),className:"btn btn-primary"},"Count")),r.a.createElement("td",null,e.user_message),e.completed?r.a.createElement(n.Fragment,null,r.a.createElement("td",null,e.completed_message),r.a.createElement("td",null,"Complete")):r.a.createElement(n.Fragment,null,r.a.createElement("td",null,r.a.createElement("textarea",{id:"".concat(e.stocklist_id),cols:"40",rows:"2"})),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-success",onClick:function(t){!function(e){v.apply(this,arguments)}(e.stocklist_id)}},"Mark as complete"))))})))))))},ce=function(e){var t=e.setAuth,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)([]),d=Object(m.a)(i,2),f=d[0],b=d[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),k=h[0],v=h[1],g=localStorage.getItem("stocktake"),y=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,b(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){console.log("hello"),null!==g&&(console.log("stocktake in progress"),s(!0)),y(),v(!1)}),[k]),r.a.createElement("main",{role:"main"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),p.a.success("Logged out succsessfully!")}(e)}},"Logout"),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Stock Areas"))),r.a.createElement("div",null,r.a.createElement(re,{allLists:f,setListsChange:v,stocktake:l,stocktake_id:g})))},le=function(e){return r.a.createElement("td",{"data-testid":"product",className:"table-light"},e.name)},se=(a(188),function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),i=Object(m.a)(s,2),d=i[0],f=i[1],b=Object(n.useState)(!1),E=Object(m.a)(b,2),h=E[0],k=E[1],v=Object(n.useState)(!1),g=Object(m.a)(v,2),y=g[0],j=g[1],O=Object(n.useRef)(),N=Object(n.useRef)(),x=Object(n.useState)(!1),S=Object(m.a)(x,2),w=S[0],_=S[1],C=e.match.params.id,T=function e(){j(!1),N.current.removeEventListener("dragend",e),O.current=null,N.current=null};function I(e,t){return P.apply(this,arguments)}function P(){return(P=Object(u.a)(o.a.mark((function e(t,a){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t,productI:a},e.next=4,fetch("/stocklists/savepositions",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json;case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function A(){return(A=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w?(d.map((function(e,t){return I(e.product_stocklist_id,t),null})),_(!1),p.a.success("Positions updated")):_(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/get/".concat(t),{method:"GET",headers:{token:localStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,l(n.rows[0].stocklist_name),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/list/".concat(t),{method:"GET",headers:{token:localStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,f(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/deleteproduct/".concat(t),{method:"DELETE",headers:{token:localStorage.token}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0.message);case 8:k(!0);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){L(e.match.params.id),D(e.match.params.id),k(!1)}),[h]),r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},c),r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(){return A.apply(this,arguments)}},w?"Save Positions":"Change List Order"),r.a.createElement("div",null,r.a.createElement(Q,{listId:C,setProductsChange:k})))),r.a.createElement("table",{className:"table mt-5 text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),w?null:r.a.createElement("th",null,"Delete"))),w?r.a.createElement("tbody",null,d.map((function(e,t){return r.a.createElement("tr",{draggable:!0,onDragStart:function(e){!function(e,t){O.current=t,N.current=e.target,N.current.addEventListener("dragend",T),setTimeout((function(){j(!0)}),0)}(e,{productI:t})},onDragEnter:y?function(e){var a;a={productI:t},O.current!==a.productI&&f((function(e){var t=JSON.parse(JSON.stringify(e));return t.splice(a.productI,0,t.splice(O.current.productI,1)[0]),O.current=a,t}))}:null,key:e.product_stocklist_id,className:y?(a=t,O.current.productI===a?"current dnd-item":"dnd-item"):"dnd-item"},r.a.createElement(le,{key:e.product_stocklist_id,name:e.product_name,id:e.product_stocklist_id}));var a}))):r.a.createElement("tbody",null,d.map((function(e){return r.a.createElement("tr",{key:e.product_stocklist_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger",onClick:function(t){return G(e.product_stocklist_id)}},"Delete")))}))))))))}),oe=function(e){var t=e.setAuth,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)([]),d=Object(m.a)(i,2),f=d[0],b=d[1],E=Object(n.useState)(!1),h=Object(m.a)(E,2),k=h[0],v=h[1],g=Object(n.useState)([]),y=Object(m.a)(g,2),j=y[0],O=y[1],N=Object(n.useState)(!1),S=Object(m.a)(N,2),w=S[0],_=S[1],C=Object(n.useState)([]),T=Object(m.a)(C,2),I=T[0],P=T[1],A=localStorage.getItem("laststocktake"),D=Date().toString(),G=localStorage.getItem("stocktake"),J=function(){var e=Object(u.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocktake/",{method:"GET",headers:{token:localStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,O(n.rows),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),B=function(e){try{var t={id:e,stockId:localStorage.getItem("stocktake")};fetch("/stocktake/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}catch(a){console.error(a.message)}},M=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l||null!==G){e.next=17;break}return e.prev=1,e.next=4,fetch("/stocktake/new",{method:"POST",headers:{token:localStorage.token}});case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,localStorage.setItem("stocktake",a.rows[0].stocktake_id),localStorage.setItem("stocktakedate",a.rows[0].stocktake_date),j.forEach((function(e){B(e.product_stocklist_id)})),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0.message);case 16:s(!0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,b(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocklists/inprogress",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:e.sent.length>0?_(!1):_(!0),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/products/get/distinct",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,P(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.map((function(e){return Y(e.product_id,Number(A),Number(A)+1)})).forEach((function(e){e.then((function(e){V(e.product_id,e.sales,G)}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e,t,a){try{var n={product_id:e,sales:t,stocktake:a};fetch("/inventory/writesales",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(n)})}catch(r){console.error(r.message)}},Y=function(){var e=Object(u.a)(o.a.mark((function e(t,a,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={prevStocktake:a,currentStocktake:n,product:t},e.next=4,fetch("/inventory/sales",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(r)});case 4:return c=e.sent,e.next=7,c.json();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={stocktake_id:G},e.next=4,fetch("/stocktake/inactive",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:return a=e.sent,e.next=7,a.json();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){F(),Q(),J(),null!==G&&s(!0),R(),v(!1),j.length>0&&console.log(j)}),[k]),G?r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-danger float-right",onClick:function(e){return function(e){v(!0),w?(e.preventDefault(),W(),localStorage.setItem("laststocktake",localStorage.getItem("stocktake")),localStorage.removeItem("stocktake"),localStorage.removeItem("stocktakedate"),s(!1),p.a.success("Stocktake ended"),z(I)):p.a.warning("Not all counts have been completed")}(e)}},"End Stocktake"),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Stocktake"),r.a.createElement("h4",null,"Stocktake in progress :"," ",r.a.createElement(x.a,{date:localStorage.getItem("stocktakedate"),format:"DD/MM/YYYY HH:mm"})))),r.a.createElement("div",null,r.a.createElement(L,{allLists:f,setListsChange:v,stocktake:l,stocktake_id:G}))):r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("button",{className:"btn btn-primary float-right",onClick:function(e){return function(e){e.preventDefault(),localStorage.removeItem("token"),t(!1),p.a.success("Logged out succsessfully!")}(e)}},"Logout"),r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Stocktake"),r.a.createElement("h4",null,"Create a new stocktaking record for ",D,"?"),r.a.createElement("button",{className:"btn btn-info",onClick:M},"Start Stocktake"))))},ue=a(73),me=a(74),ie=a(75),de=a(26),pe=function(e){var t=e.setIsAuthenticated,a=e.isAuthenticated,c=e.name,l=e.userType,s=Object(n.useState)(!1),i=Object(m.a)(s,2),d=(i[0],i[1]),f=Object(n.useState)(""),b=Object(m.a)(f,2),E=b[0],h=b[1];function k(){return(k=Object(u.a)(o.a.mark((function e(){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,t(!0===n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function v(){return(v=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/inventory/latest",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,h(a[0].stocktake_id),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function g(){return(g=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocktake/activestocktake",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:(a=e.sent).length>0&&(d(a),localStorage.setItem("stocktake",a[0].stocktake_id),localStorage.setItem("stocktakedate",a[0].stocktake_date)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){g.apply(this,arguments)}(),function(){v.apply(this,arguments)}(),function(){k.apply(this,arguments)}()}),[a]),a&&"Admin"===l?r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0"},r.a.createElement("a",{href:"#",className:"navbar-brand col-sm-3 col-md-2 mr-0"},"BevStock"),r.a.createElement("ul",{className:"navbar-nav px-3"},r.a.createElement("li",{className:"nav-item text-nowrap"},r.a.createElement("a",{className:"nav-link",onClick:function(e){return function(e){e.preventDefault(),localStorage.clear(),t(!1),p.a.success("Logged out successfully!")}(e)},href:"#"},c," : Sign out")))),r.a.createElement("nav",{className:"col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("div",{className:"sidebar-sticky"},r.a.createElement("ul",{className:"nav flex-column"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/dashboard"},r.a.createElement(ue.a,null)," Dashboard"," ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/stocktaking"},r.a.createElement(me.a,null)," View/Edit Stock Areas")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/stocktakelists"},r.a.createElement(ie.a,null),"  Stocktaking")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/inventory/".concat(E)},r.a.createElement(de.a,null)," Inventory")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/processdelivery"},r.a.createElement(de.a,null)," Process Delivery")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/team"},r.a.createElement(de.a,null)," Team Management")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/products"},r.a.createElement(de.a,null)," Products Database")))))):null},fe=function(e){var t=e.setProductsChange,a=Object(n.useState)({name:"",size:"",par:""}),c=Object(m.a)(a,2),l=c[0],s=c[1],i=l.name,d=l.size,f=l.par,b=function(e){s(Object(C.a)(Object(C.a)({},l),{},Object(_.a)({},e.target.name,e.target.value)))},E=function(){var e=Object(u.a)(o.a.mark((function e(a){var n,r,c,l,u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=document.getElementById("product-modal"),a.preventDefault(),n.setAttribute("style","display: none"),r=document.getElementsByClassName("modal-backdrop"),document.body.removeChild(r[0]),c=document.getElementById("category"),l=c.value,e.prev=7,u={name:i,size:d,par:f,category:l},e.next=11,fetch("/products/new",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)});case 11:return m=e.sent,e.next=14,m.json();case 14:p.a.success("Registered Successfully!"),s({name:"",size:"",par:""}),t(!0),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7),console.error(e.t0.message);case 22:case"end":return e.stop()}}),e,null,[[7,19]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(n.Fragment,null,r.a.createElement("button",{type:"button",className:"btn-sm btn-primary form-control","data-toggle":"modal","data-target":"#product-modal"},"Add New Product"),r.a.createElement("div",{id:"product-modal",className:"modal fade",role:"dialog"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("h4",{className:"modal-title"},"Add a new Product"),r.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal"},"\xd7")),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",{onSubmit:E},r.a.createElement("input",{type:"text",name:"name",placeholder:"Product Name",className:"form-control my-3",value:i,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"number",name:"size",placeholder:"Product Size",className:"form-control my-3",value:d,onChange:function(e){return b(e)}}),r.a.createElement("input",{type:"number",name:"par",placeholder:"Par Level",className:"form-control my-3",value:f,onChange:function(e){return b(e)}}),r.a.createElement("select",{className:"form-control my-3",id:"category"},r.a.createElement("option",{value:"Rum"},"Vodka"),r.a.createElement("option",{value:"Vodka"},"Rum")),r.a.createElement("button",{className:"btn btn-success btn-block"},"Submit")))))))},be=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(m.a)(l,2),i=s[0],d=s[1],p=Object(n.useState)(!1),f=Object(m.a)(p,2),b=f[0],E=f[1],h=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/products/",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,c(a),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),k=a.filter((function(e){return e.product_name.toLowerCase().includes(i.toLowerCase())}));return Object(n.useEffect)((function(){h()}),[b]),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("h1",null,"Products"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search",onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"col-2"},r.a.createElement(fe,{setProductsChange:E}))),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Par Level")),r.a.createElement("tbody",null,k.map((function(e){return r.a.createElement("tr",{key:e.product_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.product_size),r.a.createElement("td",null,e.product_category),r.a.createElement("td",null,e.par_level))})))))},Ee=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(m.a)(l,2),i=s[0],d=s[1],f=Object(n.useState)([]),b=Object(m.a)(f,2),E=(b[0],b[1],Object(n.useState)(!1)),h=Object(m.a)(E,2),k=(h[0],h[1],Date().toString(),Object(n.useState)(!1)),v=Object(m.a)(k,2),g=(v[0],v[1],localStorage.getItem("laststocktake")),y=function(){var e=Object(u.a)(o.a.mark((function e(t,a){var n,r,c,l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=a.product_stocklist_id,r=document.getElementById(a.product_stocklist_id),c=r.value,console.log(n,c),e.prev=5,l={item:n,stocktake:g,tempQuantity:c},console.log(l),e.next=10,fetch("/stocktake/count",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});case 10:return s=e.sent,e.next=13,s.json();case 13:p.a.success("Added Succesfully"),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),console.error(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/stocktake/processdelivery/".concat(localStorage.getItem("laststocktake")),{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log("hello"),c(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),O=a.filter((function(e){return e.product_name.toLowerCase().includes(i.toLowerCase())}));return Object(n.useEffect)((function(){j()}),[]),r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("h1",null,"Process Delivery"),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-9"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search",onChange:function(e){return d(e.target.value)}})),r.a.createElement("div",{className:"col-2"})),r.a.createElement("table",{className:"table table-striped table-sm"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Category"),r.a.createElement("th",null,"Quantity"))),r.a.createElement("tbody",null,O.map((function(e){return r.a.createElement("tr",{key:e.product_stocklist_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.product_size),r.a.createElement("td",null,e.product_category),r.a.createElement("td",null,r.a.createElement("form",{onSubmit:function(t){y(t,e)}},r.a.createElement("input",{id:"".concat(e.product_stocklist_id),className:"form-control",type:"number"}),r.a.createElement("button",{className:"btn btn-success"},"Add"))))})))))},he=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),i=Object(m.a)(s,2),d=i[0],p=i[1],f=e.match.params.id,b=function(){var e=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/inventory/stocktake/".concat(f),{method:"GET",headers:{token:localStorage.token}});case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,l(a);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=c.filter((function(e){return e.product_name.toLowerCase().includes(d.toLowerCase())}));return Object(n.useEffect)((function(){b()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("main",{role:"main",className:"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4"},r.a.createElement("div",{className:"jumbotron"},r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"display-3"},"Stocktake : ",f),r.a.createElement("div",null,r.a.createElement("input",{type:"text",placeholder:"Search",onChange:function(e){return p(e.target.value)}})))),r.a.createElement("div",null,r.a.createElement("table",{className:"table text-center"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Product"),r.a.createElement("th",null,"Inventory"),r.a.createElement("th",null))),r.a.createElement("tbody",null,h.map((function(e){return r.a.createElement("tr",{key:e.product_id},r.a.createElement("td",null,e.product_name),r.a.createElement("td",null,e.sum),r.a.createElement("td",null,r.a.createElement(ee,{product_id:e.product_id,id:f,name:e.product_name})))}))))),console.log(c),E.a.isEmpty(c)?null:r.a.createElement(te,{inventory:c})))};p.a.configure();var ke=function(){var e=Object(n.useState)(!0),t=Object(m.a)(e,2),a=t[0],c=t[1],l=function(e){c(e)},s=localStorage.getItem("name"),p=localStorage.getItem("role");function f(){return(f=Object(u.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/auth/is-verify",{method:"GET",headers:{token:localStorage.token}});case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,console.log("isAuth",a),c(!0===a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){!function(){f.apply(this,arguments)}()}),[]),r.a.createElement(n.Fragment,null,r.a.createElement(pe,{setIsAuthenticated:c,isAuthenticated:a,name:s,userType:p}),r.a.createElement(i.a,null,r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",render:function(e){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(I,e)}}),r.a.createElement(d.b,{exact:!0,path:"/login",render:function(e){return a?r.a.createElement(d.a,{to:"/dashboard"}):r.a.createElement(T,Object.assign({},e,{setAuth:l}))}}),r.a.createElement(d.b,{exact:!0,path:"/dashboard",render:function(e){return a?r.a.createElement(w,Object.assign({},e,{setAuth:l,name:s})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/stocktaking",render:function(e){return a?r.a.createElement(D,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/team",render:function(e){return a?r.a.createElement(M,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/count/:id/:stocktakeid",render:function(e){return a?r.a.createElement($,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/dashboard"})}}),r.a.createElement(d.b,{exact:!0,path:"/viewedit/:id",render:function(e){return a?r.a.createElement(se,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/dashboard"})}}),r.a.createElement(d.b,{exact:!0,path:"/inventory/:id",render:function(e){return a?r.a.createElement(ae,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/dashboard"})}}),r.a.createElement(d.b,{exact:!0,path:"/stocktakelists",render:function(e){return a?r.a.createElement(oe,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/dashboard"})}}),r.a.createElement(d.b,{exact:!0,path:"/userdashboard",render:function(e){return a?r.a.createElement(ne,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/userstocktaking",render:function(e){return a?r.a.createElement(ce,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/products",render:function(e){return a?r.a.createElement(be,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/stocktakerecord/:id",render:function(e){return a?r.a.createElement(he,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}),r.a.createElement(d.b,{exact:!0,path:"/qrscan",render:a?function(){return r.a.createElement(X,null)}:function(){return r.a.createElement(T,null)}}),r.a.createElement(d.b,{exact:!0,path:"/processdelivery",render:function(e){return a?r.a.createElement(Ee,Object.assign({},e,{setAuth:l})):r.a.createElement(d.a,{to:"/login"})}}))))};a(189);window.React1=a(1),l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ke,null)),document.getElementById("root"))},69:function(e,t,a){e.exports=a.p+"static/media/beer-bottle.183ff331.png"},81:function(e,t,a){e.exports=a(190)},86:function(e,t,a){},89:function(e,t,a){}},[[81,1,3]]]);
//# sourceMappingURL=main.b8d03dd7.chunk.js.map