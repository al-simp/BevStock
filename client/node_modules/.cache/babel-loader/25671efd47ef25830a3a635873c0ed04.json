{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useState,useEffect}from\"react\";import InventoryBreakdown from\"./InventoryBreakdown\";import _ from\"lodash\";import PdfGenerator from\"../PdfGenerator\";var Inventory=function Inventory(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),inventory=_useState2[0],setInventory=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];//get the latest inventory ID from the params\nvar id=props.match.params.id;var getInventory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"/inventory/stocktake/\".concat(id),{method:\"GET\",headers:{token:localStorage.token}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:parseData=_context.sent;setInventory(parseData);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getInventory(){return _ref.apply(this,arguments);};}();var filteredInventory=inventory.filter(function(item){return item.product_name.toLowerCase().includes(search.toLowerCase());});useEffect(function(){getInventory();},[]);return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"display-3\"},\"Stocktake : \",id),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"Search\",onChange:function onChange(e){return setSearch(e.target.value);}})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"table\",{className:\"table text-center\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Product\"),/*#__PURE__*/React.createElement(\"th\",null,\"Inventory\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,filteredInventory.map(function(item){return/*#__PURE__*/React.createElement(\"tr\",{key:item.product_id},/*#__PURE__*/React.createElement(\"td\",null,item.product_name),/*#__PURE__*/React.createElement(\"td\",null,item.sum),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(InventoryBreakdown,{product_id:item.product_id,id:id,name:item.product_name})));})))),console.log(inventory),!_.isEmpty(inventory)?/*#__PURE__*/React.createElement(PdfGenerator,{inventory:inventory}):null));};export default Inventory;","map":{"version":3,"sources":["C:/Users/alans/bevstock/client/src/components/inventory/PreviousStocktakeRecords.js"],"names":["React","Fragment","useState","useEffect","InventoryBreakdown","_","PdfGenerator","Inventory","props","inventory","setInventory","search","setSearch","id","match","params","getInventory","fetch","method","headers","token","localStorage","response","json","parseData","filteredInventory","filter","item","product_name","toLowerCase","includes","e","target","value","map","product_id","sum","console","log","isEmpty"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,QAA1B,CAAoCC,SAApC,KAAqD,OAArD,CACA,MAAOC,CAAAA,kBAAP,KAA+B,sBAA/B,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,MAAOC,CAAAA,YAAP,KAAyB,iBAAzB,CAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,KAAD,CAAW,eACON,QAAQ,CAAC,EAAD,CADf,wCACpBO,SADoB,eACTC,YADS,8BAECR,QAAQ,CAAC,EAAD,CAFT,yCAEpBS,MAFoB,eAEZC,SAFY,eAI3B;AACA,GAAMC,CAAAA,EAAE,CAAGL,KAAK,CAACM,KAAN,CAAYC,MAAZ,CAAmBF,EAA9B,CAEA,GAAMG,CAAAA,YAAY,0FAAG,gLACIC,CAAAA,KAAK,gCACFJ,EADE,EAE1B,CACEK,MAAM,CAAE,KADV,CAEEC,OAAO,CAAE,CAAEC,KAAK,CAAEC,YAAY,CAACD,KAAtB,CAFX,CAF0B,CADT,QACbE,QADa,qCAQKA,CAAAA,QAAQ,CAACC,IAAT,EARL,QAQbC,SARa,eASnBd,YAAY,CAACc,SAAD,CAAZ,CATmB,sDAAH,kBAAZR,CAAAA,YAAY,0CAAlB,CAYA,GAAMS,CAAAA,iBAAiB,CAAGhB,SAAS,CAACiB,MAAV,CAAiB,SAACC,IAAD,CAAU,CACnD,MAAOA,CAAAA,IAAI,CAACC,YAAL,CAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCnB,MAAM,CAACkB,WAAP,EAAzC,CAAP,CACD,CAFyB,CAA1B,CAIA1B,SAAS,CAAC,UAAM,CACda,YAAY,GACb,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,oBAAC,QAAD,mBACE,4BAAM,IAAI,CAAC,MAAX,CAAkB,SAAS,CAAC,yCAA5B,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,WAAd,iBAAuCH,EAAvC,CADF,cAEE,4CACE,6BACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,QAFd,CAGE,QAAQ,CAAE,kBAACkB,CAAD,QAAOnB,CAAAA,SAAS,CAACmB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,EAHZ,EADF,CAFF,CADF,CADF,cAaE,4CACE,6BAAO,SAAS,CAAC,mBAAjB,eACE,8CACE,2CACE,wCADF,cAEE,0CAFF,cAGE,8BAHF,CADF,CADF,cAQE,iCACGR,iBAAiB,CAACS,GAAlB,CAAsB,SAACP,IAAD,qBACrB,0BAAI,GAAG,CAAEA,IAAI,CAACQ,UAAd,eACE,8BAAKR,IAAI,CAACC,YAAV,CADF,cAEE,8BAAKD,IAAI,CAACS,GAAV,CAFF,cAGE,2CACE,oBAAC,kBAAD,EACE,UAAU,CAAET,IAAI,CAACQ,UADnB,CAEE,EAAE,CAAEtB,EAFN,CAGE,IAAI,CAAEc,IAAI,CAACC,YAHb,EADF,CAHF,CADqB,EAAtB,CADH,CARF,CADF,CAbF,CAuCGS,OAAO,CAACC,GAAR,CAAY7B,SAAZ,CAvCH,CAwCG,CAACJ,CAAC,CAACkC,OAAF,CAAU9B,SAAV,CAAD,cAAwB,oBAAC,YAAD,EAAc,SAAS,CAAEA,SAAzB,EAAxB,CAAiE,IAxCpE,CADF,CADF,CA8CD,CAzED,CA2EA,cAAeF,CAAAA,SAAf","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\nimport InventoryBreakdown from \"./InventoryBreakdown\";\r\nimport _ from \"lodash\";\r\nimport PdfGenerator from \"../PdfGenerator\";\r\n\r\nconst Inventory = (props) => {\r\n  const [inventory, setInventory] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  //get the latest inventory ID from the params\r\n  const id = props.match.params.id;\r\n\r\n  const getInventory = async () => {\r\n    const response = await fetch(\r\n      `/inventory/stocktake/${id}`,\r\n      {\r\n        method: \"GET\",\r\n        headers: { token: localStorage.token },\r\n      }\r\n    );\r\n    const parseData = await response.json();\r\n    setInventory(parseData);\r\n  };\r\n\r\n  const filteredInventory = inventory.filter((item) => {\r\n    return item.product_name.toLowerCase().includes(search.toLowerCase());\r\n  });\r\n\r\n  useEffect(() => {\r\n    getInventory();\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\">\r\n        <div className=\"jumbotron\">\r\n          <div className=\"container\">\r\n            <h1 className=\"display-3\">Stocktake : {id}</h1>\r\n            <div>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search\"\r\n                onChange={(e) => setSearch(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <table className=\"table text-center\">\r\n            <thead>\r\n              <tr>\r\n                <th>Product</th>\r\n                <th>Inventory</th>\r\n                <th></th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {filteredInventory.map((item) => (\r\n                <tr key={item.product_id}>\r\n                  <td>{item.product_name}</td>\r\n                  <td>{item.sum}</td>\r\n                  <td>\r\n                    <InventoryBreakdown\r\n                      product_id={item.product_id}\r\n                      id={id}\r\n                      name={item.product_name}\r\n                    />\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {console.log(inventory)}\r\n        {!_.isEmpty(inventory) ? <PdfGenerator inventory={inventory} /> : null}\r\n      </main>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default Inventory;\r\n"]},"metadata":{},"sourceType":"module"}