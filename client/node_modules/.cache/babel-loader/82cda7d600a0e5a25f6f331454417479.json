{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect,useState}from\"react\";import AddNewProduct from\"./AddNewProduct\";var ProductsDb=function ProductsDb(){//declare products as an empty array\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];//boolean to indicate whether there has been a change in the products array\nvar _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),productsChange=_useState6[0],setProductsChange=_useState6[1];//get the products and populate products array.\nvar getProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parseRes;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/products/\",{method:\"GET\",headers:{token:localStorage.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:parseRes=_context.sent;//use set\nsetProducts(parseRes);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getProducts(){return _ref.apply(this,arguments);};}();var filteredProducts=products.filter(function(item){return item.product_name.toLowerCase().includes(search.toLowerCase());});useEffect(function(){getProducts();},[productsChange]);return/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Products\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-9\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Search\",onChange:function onChange(e){return setSearch(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(AddNewProduct,{setProductsChange:setProductsChange}))),/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Product\"),/*#__PURE__*/React.createElement(\"th\",null,\"Size\"),/*#__PURE__*/React.createElement(\"th\",null,\"Category\"),/*#__PURE__*/React.createElement(\"th\",null,\"Par Level\")),/*#__PURE__*/React.createElement(\"tbody\",null,filteredProducts.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product.product_id},/*#__PURE__*/React.createElement(\"td\",null,product.product_name),/*#__PURE__*/React.createElement(\"td\",null,product.product_size),/*#__PURE__*/React.createElement(\"td\",null,product.product_category),/*#__PURE__*/React.createElement(\"td\",null,product.par_level));}))));};export default ProductsDb;","map":{"version":3,"sources":["C:/Users/alans/bevstock/client/src/components/inventory/ProductsDB.js"],"names":["React","useEffect","useState","AddNewProduct","ProductsDb","products","setProducts","search","setSearch","productsChange","setProductsChange","getProducts","fetch","method","headers","token","localStorage","response","json","parseRes","console","error","message","filteredProducts","filter","item","product_name","toLowerCase","includes","e","target","value","map","product","product_id","product_size","product_category","par_level"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB;AADuB,cAESF,QAAQ,CAAC,EAAD,CAFjB,wCAEhBG,QAFgB,eAENC,WAFM,8BAGKJ,QAAQ,CAAC,EAAD,CAHb,yCAGhBK,MAHgB,eAGRC,SAHQ,eAKvB;AALuB,eAMqBN,QAAQ,CAAC,KAAD,CAN7B,yCAMhBO,cANgB,eAMAC,iBANA,eAQvB;AACA,GAAMC,CAAAA,WAAW,0FAAG,+LAEOC,CAAAA,KAAK,CAAC,YAAD,CAAe,CACzCC,MAAM,CAAE,KADiC,CAEzCC,OAAO,CAAE,CAAEC,KAAK,CAAEC,YAAY,CAACD,KAAtB,CAFgC,CAAf,CAFZ,QAEVE,QAFU,qCAMOA,CAAAA,QAAQ,CAACC,IAAT,EANP,QAMVC,QANU,eAOhB;AACAb,WAAW,CAACa,QAAD,CAAX,CARgB,iFAUhBC,OAAO,CAACC,KAAR,CAAc,YAAMC,OAApB,EAVgB,qEAAH,kBAAXX,CAAAA,WAAW,0CAAjB,CAcA,GAAMY,CAAAA,gBAAgB,CAAGlB,QAAQ,CAACmB,MAAT,CAAgB,SAACC,IAAD,CAAU,CACjD,MAAOA,CAAAA,IAAI,CAACC,YAAL,CAAkBC,WAAlB,GAAgCC,QAAhC,CAAyCrB,MAAM,CAACoB,WAAP,EAAzC,CAAP,CACD,CAFwB,CAAzB,CAIA1B,SAAS,CAAC,UAAM,CACdU,WAAW,GACZ,CAFQ,CAEN,CAACF,cAAD,CAFM,CAAT,CAIA,mBACE,4BAAM,IAAI,CAAC,MAAX,CAAkB,SAAS,CAAC,yCAA5B,eACE,yCADF,cAEE,2BAAK,SAAS,CAAC,KAAf,eACE,2BAAK,SAAS,CAAC,OAAf,eACE,6BACE,SAAS,CAAC,cADZ,CAEE,IAAI,CAAC,MAFP,CAGE,WAAW,CAAC,QAHd,CAIE,QAAQ,CAAE,kBAACoB,CAAD,QAAOrB,CAAAA,SAAS,CAACqB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,EAJZ,EADF,CADF,cASE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,aAAD,EAAe,iBAAiB,CAAErB,iBAAlC,EADF,CATF,CAFF,cAeE,6BAAO,SAAS,CAAC,8BAAjB,eACE,8CACE,wCADF,cAEE,qCAFF,cAGE,yCAHF,cAIE,0CAJF,CADF,cAOE,iCACGa,gBAAgB,CAACS,GAAjB,CAAqB,SAACC,OAAD,qBACpB,0BAAI,GAAG,CAAEA,OAAO,CAACC,UAAjB,eACE,8BAAKD,OAAO,CAACP,YAAb,CADF,cAEE,8BAAKO,OAAO,CAACE,YAAb,CAFF,cAGE,8BAAKF,OAAO,CAACG,gBAAb,CAHF,cAIE,8BAAKH,OAAO,CAACI,SAAb,CAJF,CADoB,EAArB,CADH,CAPF,CAfF,CADF,CAoCD,CAnED,CAqEA,cAAejC,CAAAA,UAAf","sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport AddNewProduct from \"./AddNewProduct\";\r\n\r\nconst ProductsDb = () => {\r\n  //declare products as an empty array\r\n  const [products, setProducts] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n\r\n  //boolean to indicate whether there has been a change in the products array\r\n  const [productsChange, setProductsChange] = useState(false);\r\n\r\n  //get the products and populate products array.\r\n  const getProducts = async () => {\r\n    try {\r\n      const response = await fetch(\"/products/\", {\r\n        method: \"GET\",\r\n        headers: { token: localStorage.token },\r\n      });\r\n      const parseRes = await response.json();\r\n      //use set\r\n      setProducts(parseRes);\r\n    } catch (error) {\r\n      console.error(error.message);\r\n    }\r\n  };\r\n\r\n  const filteredProducts = products.filter((item) => {\r\n    return item.product_name.toLowerCase().includes(search.toLowerCase());\r\n  });\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, [productsChange]);\r\n\r\n  return (\r\n    <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\">\r\n      <h1>Products</h1>\r\n      <div className=\"row\">\r\n        <div className=\"col-9\">\r\n          <input\r\n            className=\"form-control\"\r\n            type=\"text\"\r\n            placeholder=\"Search\"\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"col-2\">\r\n          <AddNewProduct setProductsChange={setProductsChange} />\r\n        </div>\r\n      </div>\r\n      <table className=\"table table-striped table-sm\">\r\n        <thead>\r\n          <th>Product</th>\r\n          <th>Size</th>\r\n          <th>Category</th>\r\n          <th>Par Level</th>\r\n        </thead>\r\n        <tbody>\r\n          {filteredProducts.map((product) => (\r\n            <tr key={product.product_id}>\r\n              <td>{product.product_name}</td>\r\n              <td>{product.product_size}</td>\r\n              <td>{product.product_category}</td>\r\n              <td>{product.par_level}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ProductsDb;\r\n"]},"metadata":{},"sourceType":"module"}