{"ast":null,"code":"import { css } from 'goober';\nimport React, { useRef, useEffect, useState } from 'react';\nimport useOutsideClick from '@rooks/use-outside-click';\n/**\r\n * Filters React Select options and sorts by similarity to a search filter.\r\n * Handles partial matches, eg. searching for \"Waberg High\" will find \"Raoul\r\n * Wallenberg Traditional High School\". Case insensitive. Ignores\r\n * non-alphanumeric characters.\r\n *\r\n * @param  options  An unfiltered list of Options.\r\n * @param? filter  A string to compare against Option labels.\r\n * @param? substitutions  Strings with multiple spellings or variations that we\r\n *           expect to match, eg. accented characters or abbreviated words.\r\n *\r\n * @return A filtered and sorted array of Options.\r\n */\n\nfunction filterOptions(options, filter, substitutions) {\n  // If the filter is blank, return the full list of Options.\n  if (!filter) {\n    return options;\n  }\n\n  var cleanFilter = cleanUpText(filter, substitutions);\n  return options // Filter out undefined or null Options.\n  .filter(function (_ref) {\n    var label = _ref.label,\n        value = _ref.value;\n    return label != null && value != null;\n  }) // Create a {score, Option} pair for each Option based on its label's\n  // similarity to the filter text.\n  .map(function (option) {\n    return {\n      option: option,\n      score: typeaheadSimilarity(cleanUpText(option.label, substitutions), cleanFilter)\n    };\n  }) // Only include matches of the entire substring, with a slight\n  // affordance for transposition or extra characters.\n  .filter(function (pair) {\n    return pair.score >= cleanFilter.length - 2;\n  }) // Sort 'em by order of their score.\n  .sort(function (a, b) {\n    return b.score - a.score;\n  }) // …and grab the original Options back from their pairs.\n  .map(function (pair) {\n    return pair.option;\n  });\n}\n/**\r\n * Scores the similarity between two strings by returning the length of the\r\n * longest common subsequence. Intended for comparing strings of different\r\n * lengths; eg. when matching a typeahead search input with a school name.\r\n\n * Meant for use in an instant search box where results are being fetched\r\n * as a user is typing.\r\n *\r\n * @param  a  The longer string (though, we flip them if it's shorter).\r\n * @param  b  The shorter string, eg. a typeahead search input.\r\n *\r\n * @return The length of the longest common subsequence. Higher scores indicate\r\n *           closer matches.\r\n */\n\n\nfunction typeaheadSimilarity(a, b) {\n  var aLength = a.length;\n  var bLength = b.length;\n  var table = [];\n\n  if (!aLength || !bLength) {\n    return 0;\n  } // Ensure `a` isn't shorter than `b`.\n\n\n  if (aLength < bLength) {\n    var _ref2 = [b, a];\n    a = _ref2[0];\n    b = _ref2[1];\n  } // Early exit if `a` includes `b`; these will be scored higher than any\n  // other options with the same `b` (filter string), with a preference for\n  // shorter `a` strings (option labels).\n\n\n  if (a.indexOf(b) !== -1) {\n    return bLength + 1 / aLength;\n  } // Initialize the table axes:\n  //\n  //    0 0 0 0 ... bLength\n  //    0\n  //    0\n  //\n  //   ...\n  //\n  // aLength\n  //\n\n\n  for (var x = 0; x <= aLength; ++x) {\n    table[x] = [0];\n  }\n\n  for (var y = 0; y <= bLength; ++y) {\n    table[0][y] = 0;\n  } // Populate the rest of the table with a dynamic programming algorithm.\n\n\n  for (var _x = 1; _x <= aLength; ++_x) {\n    for (var _y = 1; _y <= bLength; ++_y) {\n      table[_x][_y] = a[_x - 1] === b[_y - 1] ? 1 + table[_x - 1][_y - 1] : Math.max(table[_x][_y - 1], table[_x - 1][_y]);\n    }\n  }\n\n  return table[aLength][bLength];\n}\n/**\r\n * Apply string substitutions, remove non-alphanumeric characters, and convert\r\n * all letters to uppercase.\r\n *\r\n * eg. 'Scoil Bhríde Primary School' may become 'SCOILBHRIDEPRIMARYSCHOOL'.\r\n *\r\n * @param  input  An unsanitized input string.\r\n * @param  substitutions  Strings with multiple spellings or variations that we\r\n *          expect to match, for example accented characters or abbreviated\r\n *          words.\r\n *\r\n * @return The sanitized text.\r\n */\n\n\nfunction cleanUpText(input, substitutions) {\n  if (!input) {\n    return \"\";\n  } // Uppercase and remove all non-alphanumeric, non-accented characters.\n  // Also remove underscores.\n\n\n  input = input.toUpperCase().replace(/((?=[^\\u00E0-\\u00FC])\\W)|_/g, \"\");\n\n  if (!substitutions) {\n    return input;\n  }\n\n  var safeSubstitutions = substitutions; // For Flow.\n  // Replace all strings in `safeSubstitutions` with their standardized\n  // counterparts.\n\n  return Object.keys(safeSubstitutions).reduce(function (output, substitution) {\n    var unsubbed = new RegExp(substitution, \"g\");\n    return output.replace(unsubbed, safeSubstitutions[substitution]);\n  }, input);\n}\n\nvar strings = {\n  selectSomeItems: \"Select...\",\n  allItemsAreSelected: \"All items are selected.\",\n  selectAll: \"Select All\",\n  search: \"Search\"\n};\n\nfunction getString(key, overrideStrings) {\n  if (overrideStrings && overrideStrings[key]) {\n    return overrideStrings[key];\n  }\n\n  return strings[key];\n}\n\nvar DefaultRenderer = /*#__PURE__*/css({\n  \"& input,& span\": {\n    verticalAlign: \"middle\",\n    margin: 0\n  },\n  span: {\n    display: \"inline-block\",\n    paddingLeft: \"5px\"\n  },\n  \"&.disabled\": {\n    opacity: 0.5\n  }\n});\n\nvar DefaultItemRenderer = function DefaultItemRenderer(_ref) {\n  var checked = _ref.checked,\n      option = _ref.option,\n      onClick = _ref.onClick,\n      disabled = _ref.disabled;\n  return React.createElement(\"div\", {\n    className: DefaultRenderer + \" item-renderer \" + (disabled && \"disabled\")\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    onChange: onClick,\n    checked: checked,\n    tabIndex: -1,\n    disabled: disabled\n  }), React.createElement(\"span\", null, option.label));\n};\n/**\r\n * This component represents an individual item in the multi-select drop-down\r\n */\n\n\nvar ItemContainer = /*#__PURE__*/css({\n  boxSizing: \"border-box\",\n  cursor: \"pointer\",\n  display: \"block\",\n  padding: \"var(--rmsc-spacing)\",\n  outline: \"0\",\n  \"&:hover,&:focus\": {\n    background: \"var(--rmsc-hover)\"\n  },\n  \"&.selected\": {\n    background: \"var(--rmsc-selected)\"\n  }\n});\n\nvar SelectItem = function SelectItem(_ref) {\n  var _ref$itemRenderer = _ref.itemRenderer,\n      ItemRenderer = _ref$itemRenderer === void 0 ? DefaultItemRenderer : _ref$itemRenderer,\n      option = _ref.option,\n      checked = _ref.checked,\n      focused = _ref.focused,\n      disabled = _ref.disabled,\n      onSelectionChanged = _ref.onSelectionChanged,\n      onClick = _ref.onClick;\n  var itemRef = useRef();\n  useEffect(function () {\n    updateFocus(); // eslint-disable-next-line\n  }, [focused]);\n\n  var toggleChecked = function toggleChecked() {\n    onSelectionChanged(!checked);\n  };\n\n  var handleClick = function handleClick(e) {\n    toggleChecked();\n    onClick(e);\n  };\n\n  var updateFocus = function updateFocus() {\n    if (focused && !disabled && itemRef) {\n      itemRef.current.focus();\n    }\n  };\n\n  var handleKeyDown = function handleKeyDown(e) {\n    switch (e.which) {\n      case 13: // Enter\n\n      case 32:\n        // Space\n        toggleChecked();\n        break;\n\n      default:\n        return;\n    }\n\n    e.preventDefault();\n  };\n\n  return React.createElement(\"label\", {\n    className: ItemContainer + \" select-item \" + (checked && \"selected\"),\n    role: \"option\",\n    \"aria-selected\": checked,\n    tabIndex: -1,\n    ref: itemRef,\n    onKeyDown: handleKeyDown\n  }, React.createElement(ItemRenderer, {\n    option: option,\n    checked: checked,\n    onClick: handleClick,\n    disabled: disabled\n  }));\n};\n/**\r\n * This component represents an unadorned list of SelectItem (s).\r\n */\n\n\nvar SelectListUl = /*#__PURE__*/css({\n  margin: 0,\n  paddingLeft: 0,\n  li: {\n    listStyle: \"none\",\n    margin: 0\n  }\n});\n\nvar SelectList = function SelectList(_ref) {\n  var value = _ref.value,\n      onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      ItemRenderer = _ref.ItemRenderer,\n      options = _ref.options,\n      focusIndex = _ref.focusIndex,\n      _onClick = _ref.onClick;\n\n  var handleSelectionChanged = function handleSelectionChanged(option, checked) {\n    if (disabled) {\n      return;\n    }\n\n    onChange(checked ? [].concat(value, [option]) : value.filter(function (o) {\n      return o.value !== option.value;\n    }));\n  };\n\n  return React.createElement(\"ul\", {\n    className: SelectListUl\n  }, options.map(function (o, i) {\n    return React.createElement(\"li\", {\n      key: o.hasOwnProperty(\"key\") ? o.key : i\n    }, React.createElement(SelectItem, {\n      focused: focusIndex === i,\n      option: o,\n      onSelectionChanged: function onSelectionChanged(c) {\n        return handleSelectionChanged(o, c);\n      },\n      checked: value.find(function (s) {\n        return s.value === o.value;\n      }) ? true : false,\n      onClick: function onClick(e) {\n        return _onClick(e, i);\n      },\n      itemRenderer: ItemRenderer,\n      disabled: o.disabled || disabled\n    }));\n  }));\n};\n/**\r\n * This component represents the entire panel which gets dropped down when the\r\n * user selects the component.  It encapsulates the search filter, the\r\n * Select-all item, and the list of options.\r\n */\n\n\nvar FocusType;\n\n(function (FocusType) {\n  FocusType[FocusType[\"SEARCH\"] = -1] = \"SEARCH\";\n  FocusType[FocusType[\"NONE\"] = 0] = \"NONE\";\n})(FocusType || (FocusType = {}));\n\nvar SelectSearchContainer = /*#__PURE__*/css({\n  width: \"100%\",\n  borderBottom: \"1px solid var(--rmsc-border)\",\n  input: {\n    height: \"var(--rmsc-height)\",\n    padding: \"0 var(--rmsc-spacing)\",\n    width: \"100%\",\n    outline: \"none\",\n    border: \"0\"\n  }\n});\n\nvar SelectPanel = function SelectPanel(props) {\n  var onChange = props.onChange,\n      options = props.options,\n      value = props.value,\n      customFilterOptions = props.filterOptions,\n      selectAllLabel = props.selectAllLabel,\n      ItemRenderer = props.ItemRenderer,\n      disabled = props.disabled,\n      disableSearch = props.disableSearch,\n      focusSearchOnOpen = props.focusSearchOnOpen,\n      hasSelectAll = props.hasSelectAll,\n      overrideStrings = props.overrideStrings;\n\n  var _useState = useState(\"\"),\n      searchText = _useState[0],\n      setSearchText = _useState[1];\n\n  var _useState2 = useState(focusSearchOnOpen ? FocusType.SEARCH : FocusType.NONE),\n      focusIndex = _useState2[0],\n      setFocusIndex = _useState2[1];\n\n  var _useState3 = useState(),\n      selectAllLength = _useState3[0],\n      setSelectAllLength = _useState3[1];\n\n  var selectAllOption = {\n    label: selectAllLabel || getString(\"selectAll\", overrideStrings),\n    value: \"\"\n  };\n  useEffect(function () {\n    setSelectAllLength(selectAllValues(true).length); // eslint-disable-next-line\n  }, [options]);\n\n  var selectAllValues = function selectAllValues(checked) {\n    var selectedValues = value.map(function (o) {\n      return o.value;\n    });\n    return options.filter(function (_ref) {\n      var disabled = _ref.disabled,\n          value = _ref.value;\n\n      if (checked) {\n        return !disabled || selectedValues.includes(value);\n      }\n\n      return disabled && selectedValues.includes(value);\n    });\n  };\n\n  var selectAllChanged = function selectAllChanged(checked) {\n    var newOptions = selectAllValues(checked);\n    onChange(newOptions);\n  };\n\n  var handleSearchChange = function handleSearchChange(e) {\n    setSearchText(e.target.value);\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  var handleItemClicked = function handleItemClicked(index) {\n    return setFocusIndex(index);\n  };\n\n  var handleKeyDown = function handleKeyDown(e) {\n    switch (e.which) {\n      case 38:\n        // Up Arrow\n        if (e.altKey) {\n          return;\n        }\n\n        updateFocus(-1);\n        break;\n\n      case 40:\n        // Down Arrow\n        if (e.altKey) {\n          return;\n        }\n\n        updateFocus(1);\n        break;\n\n      default:\n        return;\n    }\n\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  var handleSearchFocus = function handleSearchFocus() {\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  var filteredOptions = function filteredOptions() {\n    return customFilterOptions ? customFilterOptions(options, searchText) : filterOptions(options, searchText);\n  };\n\n  var updateFocus = function updateFocus(offset) {\n    var newFocus = focusIndex + offset;\n    newFocus = Math.max(0, newFocus);\n    newFocus = Math.min(newFocus, options.length);\n    setFocusIndex(newFocus);\n  };\n\n  return React.createElement(\"div\", {\n    className: \"select-panel\",\n    role: \"listbox\",\n    onKeyDown: handleKeyDown\n  }, !disableSearch && React.createElement(\"div\", {\n    className: SelectSearchContainer\n  }, React.createElement(\"input\", {\n    autoFocus: focusSearchOnOpen,\n    placeholder: getString(\"search\", overrideStrings),\n    type: \"search\",\n    \"aria-describedby\": getString(\"search\", overrideStrings),\n    onChange: handleSearchChange,\n    onFocus: handleSearchFocus\n  })), hasSelectAll && !searchText && React.createElement(SelectItem, {\n    focused: focusIndex === 0,\n    checked: selectAllLength === value.length,\n    option: selectAllOption,\n    onSelectionChanged: selectAllChanged,\n    onClick: function onClick() {\n      return handleItemClicked(0);\n    },\n    itemRenderer: ItemRenderer,\n    disabled: disabled\n  }), React.createElement(SelectList, Object.assign({}, props, {\n    options: filteredOptions(),\n    focusIndex: focusIndex - 1,\n    onClick: function onClick(_e, index) {\n      return handleItemClicked(index + 1);\n    },\n    ItemRenderer: ItemRenderer,\n    disabled: disabled\n  })));\n};\n\nfunction Arrow(_ref) {\n  var _ref$expanded = _ref.expanded,\n      expanded = _ref$expanded === void 0 ? false : _ref$expanded;\n  return React.createElement(\"span\", {\n    className: \"dropdown-heading-dropdown-arrow gray\",\n    style: {\n      paddingTop: \"4px\"\n    }\n  }, React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: \"24\",\n    height: \"24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    strokeWidth: \"2\",\n    viewBox: \"0 0 24 24\"\n  }, expanded ? React.createElement(\"polyline\", {\n    points: \"18 15 12 9 6 15\"\n  }) : React.createElement(\"path\", {\n    d: \"M6 9L12 15 18 9\"\n  })));\n}\n\nvar Spinner = /*#__PURE__*/css({\n  animation: \"rotate 2s linear infinite\",\n  \"& .path\": {\n    stroke: \"var(--rmsc-border)\",\n    strokeWidth: \"4px\",\n    strokeLinecap: \"round\",\n    animation: \"dash 1.5s ease-in-out infinite\"\n  },\n  \"@keyframes rotate\": {\n    \"100%\": {\n      transform: \"rotate(360deg)\"\n    }\n  },\n  \"@keyframes dash\": {\n    \"0%\": {\n      strokeDasharray: \"1, 150\",\n      strokeDashoffset: \"0\"\n    },\n    \"50%\": {\n      strokeDasharray: \"90, 150\",\n      strokeDashoffset: \"-35\"\n    },\n    \"100%\": {\n      strokeDasharray: \"90, 150\",\n      strokeDashoffset: \"-124\"\n    }\n  }\n});\n\nfunction Loading(_ref) {\n  var _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 26 : _ref$size;\n  return React.createElement(\"div\", {\n    style: {\n      cursor: \"pointer\",\n      display: \"table-cell\",\n      verticalAlign: \"middle\",\n      width: size,\n      marginRight: \"0.2rem\"\n    }\n  }, React.createElement(\"svg\", {\n    width: size,\n    height: size,\n    className: Spinner,\n    viewBox: \"0 0 50 50\",\n    style: {\n      display: \"inline-block\",\n      verticalAlign: \"middle\"\n    }\n  }, React.createElement(\"circle\", {\n    cx: \"25\",\n    cy: \"25\",\n    r: \"20\",\n    fill: \"none\",\n    className: \"path\"\n  })));\n}\n/**\r\n * A generic dropdown component.  It takes the children of the component\r\n * and hosts it in the component.  When the component is selected, it\r\n * drops-down the contentComponent and applies the contentProps.\r\n */\n\n\nvar PanelContainer = /*#__PURE__*/css({\n  position: \"absolute\",\n  zIndex: 1,\n  top: \"100%\",\n  width: \"100%\",\n  paddingTop: \"8px\",\n  \".panel-content\": {\n    maxHeight: \"300px\",\n    overflowY: \"auto\",\n    borderRadius: \"var(--rmsc-border-radius)\",\n    backgroundColor: \"var(--rmsc-background)\",\n    boxShadow: \"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)\"\n  }\n});\nvar DropdownContainer = /*#__PURE__*/css({\n  position: \"relative\",\n  outline: \"none\",\n  backgroundColor: \"var(--rmsc-background)\",\n  border: \"1px solid var(--rmsc-border)\",\n  borderRadius: \"var(--rmsc-border-radius)\",\n  \"&:focus-within\": {\n    boxShadow: \"var(--rmsc-primary) 0px 0px 0px 1px\",\n    borderColor: \"var(--rmsc-primary)\"\n  }\n});\nvar DropdownHeading = /*#__PURE__*/css({\n  position: \"relative\",\n  padding: \"0 var(--rmsc-spacing)\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"flex-end\",\n  overflow: \"hidden\",\n  width: \"100%\",\n  height: \"var(--rmsc-height)\",\n  cursor: \"default\",\n  outline: \"none\",\n  \".dropdown-heading-value\": {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    flex: \"1\"\n  }\n});\n\nvar Dropdown = function Dropdown(_ref) {\n  var children = _ref.children,\n      ContentComponent = _ref.contentComponent,\n      contentProps = _ref.contentProps,\n      isLoading = _ref.isLoading,\n      disabled = _ref.disabled,\n      shouldToggleOnHover = _ref.shouldToggleOnHover,\n      labelledBy = _ref.labelledBy,\n      onMenuToggle = _ref.onMenuToggle,\n      ArrowRenderer = _ref.ArrowRenderer;\n\n  var _useState = useState(false),\n      expanded = _useState[0],\n      setExpanded = _useState[1];\n\n  var _useState2 = useState(false),\n      hasFocus = _useState2[0],\n      setHasFocus = _useState2[1];\n\n  var FinalArrow = ArrowRenderer || Arrow;\n  var wrapper = useRef();\n  useOutsideClick(wrapper, function () {\n    return setExpanded(false);\n  });\n  /* eslint-disable react-hooks/exhaustive-deps */\n\n  useEffect(function () {\n    onMenuToggle && onMenuToggle(expanded);\n  }, [expanded]);\n\n  var handleKeyDown = function handleKeyDown(e) {\n    switch (e.which) {\n      case 27: // Escape\n\n      case 38:\n        // Up Arrow\n        setExpanded(false);\n        break;\n\n      case 13: // Enter Key\n\n      case 40:\n        // Down Arrow\n        setExpanded(true);\n        break;\n\n      default:\n        return;\n    }\n\n    e.preventDefault();\n  };\n\n  var handleHover = function handleHover(iexpanded) {\n    shouldToggleOnHover && setExpanded(iexpanded);\n  };\n\n  var handleFocus = function handleFocus(e) {\n    e.target === wrapper && !hasFocus && setHasFocus(true);\n  };\n\n  var handleBlur = function handleBlur() {\n    return hasFocus && setHasFocus(false);\n  };\n\n  var handleMouseEnter = function handleMouseEnter() {\n    return handleHover(true);\n  };\n\n  var handleMouseLeave = function handleMouseLeave() {\n    return handleHover(false);\n  };\n\n  var toggleExpanded = function toggleExpanded() {\n    return setExpanded(isLoading || disabled ? false : !expanded);\n  };\n\n  return React.createElement(\"div\", {\n    tabIndex: 0,\n    className: DropdownContainer + \" dropdown-container\",\n    \"aria-labelledby\": labelledBy,\n    \"aria-expanded\": expanded,\n    \"aria-readonly\": \"true\",\n    \"aria-disabled\": disabled,\n    ref: wrapper,\n    onKeyDown: handleKeyDown,\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    onMouseEnter: handleMouseEnter,\n    onMouseLeave: handleMouseLeave\n  }, React.createElement(\"div\", {\n    className: DropdownHeading + \" dropdown-heading\",\n    onClick: toggleExpanded\n  }, React.createElement(\"div\", {\n    className: \"dropdown-heading-value\"\n  }, children), isLoading && React.createElement(Loading, null), React.createElement(FinalArrow, {\n    expanded: expanded\n  })), expanded && React.createElement(\"div\", {\n    className: PanelContainer + \" dropdown-content\"\n  }, React.createElement(\"div\", {\n    className: \"panel-content\"\n  }, React.createElement(ContentComponent, Object.assign({}, contentProps)))));\n};\n\nvar DropdownHeader = function DropdownHeader(_ref) {\n  var value = _ref.value,\n      options = _ref.options,\n      valueRenderer = _ref.valueRenderer,\n      overrideStrings = _ref.overrideStrings;\n  var noneSelected = value.length === 0;\n  var allSelected = value.length === options.length;\n  var customText = valueRenderer && valueRenderer(value, options);\n\n  var getSelectedText = function getSelectedText() {\n    return value.map(function (s) {\n      return s.label;\n    }).join(\", \");\n  };\n\n  if (noneSelected) {\n    return React.createElement(\"span\", {\n      className: \"gray\"\n    }, customText || getString(\"selectSomeItems\", overrideStrings));\n  }\n\n  return React.createElement(\"span\", null, customText ? customText : allSelected ? getString(\"allItemsAreSelected\", overrideStrings) : getSelectedText());\n};\n\nvar MultiSelectBox = /*#__PURE__*/css({\n  \"--rmscPrimary\": \"#4285f4\",\n  \"--rmscHover\": \"#f1f3f5\",\n  \"--rmscSelected\": \"#e2e6ea\",\n  \"--rmscBorder\": \"#ccc\",\n  \"--rmscGray\": \"#aaa\",\n  \"--rmscBackground\": \"#fff\",\n  \"--rmscSpacing\": \"10px\",\n  \"--rmscBorderRadius\": \"4px\",\n  \"--rmscHeight\": \"38px\",\n  \"*\": {\n    boxSizing: \"border-box\",\n    transition: \"all 0.2s ease\"\n  },\n  \".gray\": {\n    color: \"var(--rmsc-gray)\"\n  }\n});\n\nvar MultiSelect = function MultiSelect(_ref) {\n  var _ref$focusSearchOnOpe = _ref.focusSearchOnOpen,\n      focusSearchOnOpen = _ref$focusSearchOnOpe === void 0 ? true : _ref$focusSearchOnOpe,\n      _ref$hasSelectAll = _ref.hasSelectAll,\n      hasSelectAll = _ref$hasSelectAll === void 0 ? true : _ref$hasSelectAll,\n      _ref$shouldToggleOnHo = _ref.shouldToggleOnHover,\n      shouldToggleOnHover = _ref$shouldToggleOnHo === void 0 ? false : _ref$shouldToggleOnHo,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? \"multi-select\" : _ref$className,\n      options = _ref.options,\n      value = _ref.value,\n      valueRenderer = _ref.valueRenderer,\n      overrideStrings = _ref.overrideStrings,\n      onChange = _ref.onChange,\n      disabled = _ref.disabled,\n      ItemRenderer = _ref.ItemRenderer,\n      ArrowRenderer = _ref.ArrowRenderer,\n      selectAllLabel = _ref.selectAllLabel,\n      isLoading = _ref.isLoading,\n      disableSearch = _ref.disableSearch,\n      filterOptions = _ref.filterOptions,\n      labelledBy = _ref.labelledBy,\n      onMenuToggle = _ref.onMenuToggle;\n  var nvalue = value || [];\n  return React.createElement(\"div\", {\n    className: MultiSelectBox + \" \" + className\n  }, React.createElement(Dropdown, {\n    isLoading: isLoading,\n    contentComponent: SelectPanel,\n    shouldToggleOnHover: shouldToggleOnHover,\n    contentProps: {\n      ItemRenderer: ItemRenderer,\n      options: options,\n      value: nvalue,\n      hasSelectAll: hasSelectAll,\n      selectAllLabel: selectAllLabel,\n      onChange: onChange,\n      disabled: disabled,\n      disableSearch: disableSearch,\n      focusSearchOnOpen: focusSearchOnOpen,\n      filterOptions: filterOptions,\n      overrideStrings: overrideStrings\n    },\n    disabled: disabled,\n    labelledBy: labelledBy,\n    onMenuToggle: onMenuToggle,\n    ArrowRenderer: ArrowRenderer\n  }, React.createElement(DropdownHeader, {\n    value: nvalue,\n    options: options,\n    valueRenderer: valueRenderer,\n    overrideStrings: overrideStrings\n  })));\n};\n\nexport default MultiSelect;\nexport { Dropdown, SelectItem, SelectPanel };","map":{"version":3,"sources":["../src/lib/fuzzy-match-utils.tsx","../src/lib/get-string.tsx","../src/select-panel/default-item.tsx","../src/select-panel/select-item.tsx","../src/select-panel/select-list.tsx","../src/select-panel/index.tsx","../src/multi-select/arrow.tsx","../src/multi-select/loading.tsx","../src/multi-select/dropdown.tsx","../src/multi-select/header.tsx","../src/multi-select/index.tsx"],"names":["filterOptions","options","filter","substitutions","cleanFilter","cleanUpText","label","value","option","score","typeaheadSimilarity","pair","b","a","aLength","bLength","table","x","y","Math","input","safeSubstitutions","unsubbed","output","strings","selectSomeItems","allItemsAreSelected","selectAll","search","overrideStrings","DefaultRenderer","css","verticalAlign","margin","span","display","paddingLeft","opacity","DefaultItemRenderer","checked","onClick","disabled","className","type","onChange","tabIndex","React","ItemContainer","boxSizing","cursor","padding","outline","background","SelectItem","itemRenderer","ItemRenderer","focused","onSelectionChanged","itemRef","useRef","useEffect","updateFocus","toggleChecked","handleClick","handleKeyDown","e","role","ref","onKeyDown","SelectListUl","li","listStyle","SelectList","focusIndex","handleSelectionChanged","o","key","i","s","FocusType","SelectSearchContainer","width","borderBottom","height","border","SelectPanel","customFilterOptions","selectAllLabel","disableSearch","focusSearchOnOpen","hasSelectAll","props","searchText","setSearchText","useState","setFocusIndex","selectAllLength","setSelectAllLength","selectAllOption","getString","selectAllValues","selectedValues","selectAllChanged","newOptions","handleSearchChange","handleItemClicked","handleSearchFocus","filteredOptions","newFocus","autoFocus","placeholder","onFocus","length","index","Arrow","expanded","style","paddingTop","xmlns","fill","stroke","strokeLinecap","strokeLinejoin","strokeWidth","viewBox","points","d","Spinner","animation","transform","strokeDasharray","strokeDashoffset","size","marginRight","cx","cy","r","PanelContainer","position","zIndex","top","maxHeight","overflowY","borderRadius","backgroundColor","boxShadow","DropdownContainer","borderColor","DropdownHeading","alignItems","justifyContent","overflow","textOverflow","whiteSpace","flex","Dropdown","children","contentComponent","ContentComponent","contentProps","isLoading","shouldToggleOnHover","labelledBy","onMenuToggle","ArrowRenderer","setExpanded","hasFocus","setHasFocus","FinalArrow","wrapper","useOutsideClick","handleHover","handleFocus","handleBlur","handleMouseEnter","handleMouseLeave","toggleExpanded","onBlur","onMouseEnter","onMouseLeave","DropdownHeader","valueRenderer","noneSelected","allSelected","customText","getSelectedText","MultiSelectBox","transition","color","MultiSelect","nvalue"],"mappings":"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","sourcesContent":["import { Option } from \"./interfaces\";\n\n/**\n * A collection of string matching algorithms built with React Select in mind.\n */\n\n// Option type from React Select and similar libraries.\ntype MapOfStrings = { [key: string]: string };\n\n/**\n * Filters React Select options and sorts by similarity to a search filter.\n * Handles partial matches, eg. searching for \"Waberg High\" will find \"Raoul\n * Wallenberg Traditional High School\". Case insensitive. Ignores\n * non-alphanumeric characters.\n *\n * @param  options  An unfiltered list of Options.\n * @param? filter  A string to compare against Option labels.\n * @param? substitutions  Strings with multiple spellings or variations that we\n *           expect to match, eg. accented characters or abbreviated words.\n *\n * @return A filtered and sorted array of Options.\n */\nexport function filterOptions(\n  options: Option[],\n  filter?: string,\n  substitutions?: MapOfStrings\n): Option[] {\n  // If the filter is blank, return the full list of Options.\n  if (!filter) {\n    return options;\n  }\n\n  const cleanFilter = cleanUpText(filter, substitutions);\n  return (\n    options\n      // Filter out undefined or null Options.\n      .filter(({ label, value }) => label != null && value != null)\n      // Create a {score, Option} pair for each Option based on its label's\n      // similarity to the filter text.\n      .map((option) => ({\n        option: option,\n        score: typeaheadSimilarity(\n          cleanUpText(option.label, substitutions),\n          cleanFilter\n        ),\n      }))\n      // Only include matches of the entire substring, with a slight\n      // affordance for transposition or extra characters.\n      .filter((pair) => pair.score >= cleanFilter.length - 2)\n      // Sort 'em by order of their score.\n      .sort((a, b) => b.score - a.score)\n      // …and grab the original Options back from their pairs.\n      .map((pair) => pair.option)\n  );\n}\n\n/**\n * Scores the similarity between two strings by returning the length of the\n * longest common subsequence. Intended for comparing strings of different\n * lengths; eg. when matching a typeahead search input with a school name.\n\n * Meant for use in an instant search box where results are being fetched\n * as a user is typing.\n *\n * @param  a  The longer string (though, we flip them if it's shorter).\n * @param  b  The shorter string, eg. a typeahead search input.\n *\n * @return The length of the longest common subsequence. Higher scores indicate\n *           closer matches.\n */\nexport function typeaheadSimilarity(a: string, b: string): number {\n  const aLength = a.length;\n  const bLength = b.length;\n  const table: any[] = [];\n\n  if (!aLength || !bLength) {\n    return 0;\n  }\n\n  // Ensure `a` isn't shorter than `b`.\n  if (aLength < bLength) {\n    [a, b] = [b, a];\n  }\n\n  // Early exit if `a` includes `b`; these will be scored higher than any\n  // other options with the same `b` (filter string), with a preference for\n  // shorter `a` strings (option labels).\n  if (a.indexOf(b) !== -1) {\n    return bLength + 1 / aLength;\n  }\n\n  // Initialize the table axes:\n  //\n  //    0 0 0 0 ... bLength\n  //    0\n  //    0\n  //\n  //   ...\n  //\n  // aLength\n  //\n  for (let x = 0; x <= aLength; ++x) {\n    table[x] = [0];\n  }\n  for (let y = 0; y <= bLength; ++y) {\n    table[0][y] = 0;\n  }\n\n  // Populate the rest of the table with a dynamic programming algorithm.\n  for (let x = 1; x <= aLength; ++x) {\n    for (let y = 1; y <= bLength; ++y) {\n      table[x][y] =\n        a[x - 1] === b[y - 1]\n          ? 1 + table[x - 1][y - 1]\n          : Math.max(table[x][y - 1], table[x - 1][y]);\n    }\n  }\n\n  return table[aLength][bLength];\n}\n\n/**\n * Apply string substitutions, remove non-alphanumeric characters, and convert\n * all letters to uppercase.\n *\n * eg. 'Scoil Bhríde Primary School' may become 'SCOILBHRIDEPRIMARYSCHOOL'.\n *\n * @param  input  An unsanitized input string.\n * @param  substitutions  Strings with multiple spellings or variations that we\n *          expect to match, for example accented characters or abbreviated\n *          words.\n *\n * @return The sanitized text.\n */\nexport function cleanUpText(\n  input?: string,\n  substitutions?: MapOfStrings\n): string {\n  if (!input) {\n    return \"\";\n  }\n\n  // Uppercase and remove all non-alphanumeric, non-accented characters.\n  // Also remove underscores.\n  input = input.toUpperCase().replace(/((?=[^\\u00E0-\\u00FC])\\W)|_/g, \"\");\n\n  if (!substitutions) {\n    return input;\n  }\n  const safeSubstitutions: MapOfStrings = substitutions; // For Flow.\n\n  // Replace all strings in `safeSubstitutions` with their standardized\n  // counterparts.\n  return Object.keys(safeSubstitutions).reduce((output, substitution) => {\n    const unsubbed = new RegExp(substitution, \"g\");\n    return output.replace(unsubbed, safeSubstitutions[substitution]);\n  }, input);\n}\n","const strings = {\n  selectSomeItems: \"Select...\",\n  allItemsAreSelected: \"All items are selected.\",\n  selectAll: \"Select All\",\n  search: \"Search\",\n};\n\nfunction getString(key: string, overrideStrings?): string {\n  if (overrideStrings && overrideStrings[key]) {\n    return overrideStrings[key];\n  }\n\n  return strings[key];\n}\n\nexport default getString;\n","import { css } from \"goober\";\nimport React from \"react\";\n\nimport { Option } from \"../lib/interfaces\";\n\ninterface IDefaultItemRendererProps {\n  checked: boolean;\n  option: Option;\n  disabled?: boolean;\n  onClick;\n}\n\nconst DefaultRenderer = css({\n  \"& input,& span\": {\n    verticalAlign: \"middle\",\n    margin: 0,\n  },\n  span: {\n    display: \"inline-block\",\n    paddingLeft: \"5px\",\n  },\n  \"&.disabled\": {\n    opacity: 0.5,\n  },\n});\n\nconst DefaultItemRenderer = ({\n  checked,\n  option,\n  onClick,\n  disabled,\n}: IDefaultItemRendererProps) => {\n  return (\n    <div\n      className={`${DefaultRenderer} item-renderer ${disabled && \"disabled\"}`}\n    >\n      <input\n        type=\"checkbox\"\n        onChange={onClick}\n        checked={checked}\n        tabIndex={-1}\n        disabled={disabled}\n      />\n      <span>{option.label}</span>\n    </div>\n  );\n};\n\nexport default DefaultItemRenderer;\n","/**\n * This component represents an individual item in the multi-select drop-down\n */\nimport { css } from \"goober\";\nimport React, { useEffect, useRef } from \"react\";\n\nimport { Option } from \"../lib/interfaces\";\nimport DefaultItemRenderer from \"./default-item\";\n\ninterface ISelectItemProps {\n  itemRenderer;\n  option: Option;\n  checked: boolean;\n  focused?: boolean;\n  disabled?: boolean;\n  onSelectionChanged: (checked: boolean) => void;\n  onClick;\n}\n\nconst ItemContainer = css({\n  boxSizing: \"border-box\",\n  cursor: \"pointer\",\n  display: \"block\",\n  padding: \"var(--rmsc-spacing)\",\n  outline: \"0\",\n  \"&:hover,&:focus\": {\n    background: \"var(--rmsc-hover)\",\n  },\n  \"&.selected\": {\n    background: \"var(--rmsc-selected)\",\n  },\n});\n\nconst SelectItem = ({\n  itemRenderer: ItemRenderer = DefaultItemRenderer,\n  option,\n  checked,\n  focused,\n  disabled,\n  onSelectionChanged,\n  onClick,\n}: ISelectItemProps) => {\n  const itemRef: any = useRef();\n\n  useEffect(() => {\n    updateFocus();\n    // eslint-disable-next-line\n  }, [focused]);\n\n  const toggleChecked = () => {\n    onSelectionChanged(!checked);\n  };\n\n  const handleClick = (e) => {\n    toggleChecked();\n    onClick(e);\n  };\n\n  const updateFocus = () => {\n    if (focused && !disabled && itemRef) {\n      itemRef.current.focus();\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    switch (e.which) {\n      case 13: // Enter\n      case 32: // Space\n        toggleChecked();\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  };\n\n  return (\n    <label\n      className={`${ItemContainer} select-item ${checked && \"selected\"}`}\n      role=\"option\"\n      aria-selected={checked}\n      tabIndex={-1}\n      ref={itemRef}\n      onKeyDown={handleKeyDown}\n    >\n      <ItemRenderer\n        option={option}\n        checked={checked}\n        onClick={handleClick}\n        disabled={disabled}\n      />\n    </label>\n  );\n};\n\nexport default SelectItem;\n","/**\n * This component represents an unadorned list of SelectItem (s).\n */\nimport { css } from \"goober\";\nimport React from \"react\";\n\nimport { Option } from \"../lib/interfaces\";\nimport SelectItem from \"./select-item\";\n\ninterface ISelectListProps {\n  focusIndex: number;\n  ItemRenderer?: Function;\n  options: Option[];\n  value: Option[];\n  onChange: (selected: Option[]) => void;\n  onClick: Function;\n  disabled?: boolean;\n}\n\nconst SelectListUl = css({\n  margin: 0,\n  paddingLeft: 0,\n  li: {\n    listStyle: \"none\",\n    margin: 0,\n  },\n});\n\nconst SelectList = ({\n  value,\n  onChange,\n  disabled,\n  ItemRenderer,\n  options,\n  focusIndex,\n  onClick,\n}: ISelectListProps) => {\n  const handleSelectionChanged = (option: Option, checked: boolean) => {\n    if (disabled) {\n      return;\n    }\n    onChange(\n      checked\n        ? [...value, option]\n        : value.filter((o: any) => o.value !== option.value)\n    );\n  };\n\n  return (\n    <ul className={SelectListUl}>\n      {options.map((o: any, i) => (\n        <li key={o.hasOwnProperty(\"key\") ? o.key : i}>\n          <SelectItem\n            focused={focusIndex === i}\n            option={o}\n            onSelectionChanged={(c) => handleSelectionChanged(o, c)}\n            checked={value.find((s) => s.value === o.value) ? true : false}\n            onClick={(e) => onClick(e, i)}\n            itemRenderer={ItemRenderer}\n            disabled={o.disabled || disabled}\n          />\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default SelectList;\n","/**\n * This component represents the entire panel which gets dropped down when the\n * user selects the component.  It encapsulates the search filter, the\n * Select-all item, and the list of options.\n */\nimport { css } from \"goober\";\nimport React, { useEffect, useState } from \"react\";\n\nimport { filterOptions } from \"../lib/fuzzy-match-utils\";\nimport getString from \"../lib/get-string\";\nimport { Option } from \"../lib/interfaces\";\nimport SelectItem from \"./select-item\";\nimport SelectList from \"./select-list\";\n\ninterface ISelectPanelProps {\n  ItemRenderer?: Function;\n  options: Option[];\n  value: Option[];\n  focusSearchOnOpen: boolean;\n  selectAllLabel?: string;\n  onChange: (selected: Option[]) => void;\n  disabled?: boolean;\n  disableSearch?: boolean;\n  hasSelectAll: boolean;\n  filterOptions?: (options: Option[], filter: string) => Option[];\n  overrideStrings?: { [key: string]: string };\n}\n\nenum FocusType {\n  SEARCH = -1,\n  NONE = 0,\n}\n\nconst SelectSearchContainer = css({\n  width: \"100%\",\n  borderBottom: \"1px solid var(--rmsc-border)\",\n  input: {\n    height: \"var(--rmsc-height)\",\n    padding: \"0 var(--rmsc-spacing)\",\n    width: \"100%\",\n    outline: \"none\",\n    border: \"0\",\n  },\n});\n\nexport const SelectPanel = (props: ISelectPanelProps) => {\n  const {\n    onChange,\n    options,\n    value,\n    filterOptions: customFilterOptions,\n    selectAllLabel,\n    ItemRenderer,\n    disabled,\n    disableSearch,\n    focusSearchOnOpen,\n    hasSelectAll,\n    overrideStrings,\n  } = props;\n  const [searchText, setSearchText] = useState(\"\");\n  const [focusIndex, setFocusIndex] = useState(\n    focusSearchOnOpen ? FocusType.SEARCH : FocusType.NONE\n  );\n\n  const [selectAllLength, setSelectAllLength] = useState<number>();\n  const selectAllOption = {\n    label: selectAllLabel || getString(\"selectAll\", overrideStrings),\n    value: \"\",\n  };\n\n  useEffect(() => {\n    setSelectAllLength(selectAllValues(true).length);\n    // eslint-disable-next-line\n  }, [options]);\n\n  const selectAllValues = (checked) => {\n    const selectedValues = value.map((o) => o.value);\n    return options.filter(({ disabled, value }) => {\n      if (checked) {\n        return !disabled || selectedValues.includes(value);\n      }\n      return disabled && selectedValues.includes(value);\n    });\n  };\n\n  const selectAllChanged = (checked: boolean) => {\n    const newOptions = selectAllValues(checked);\n    onChange(newOptions);\n  };\n\n  const handleSearchChange = (e) => {\n    setSearchText(e.target.value);\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const handleItemClicked = (index: number) => setFocusIndex(index);\n\n  const handleKeyDown = (e) => {\n    switch (e.which) {\n      case 38: // Up Arrow\n        if (e.altKey) {\n          return;\n        }\n        updateFocus(-1);\n        break;\n      case 40: // Down Arrow\n        if (e.altKey) {\n          return;\n        }\n        updateFocus(1);\n        break;\n      default:\n        return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  const handleSearchFocus = () => {\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const filteredOptions = () =>\n    customFilterOptions\n      ? customFilterOptions(options, searchText)\n      : filterOptions(options, searchText);\n\n  const updateFocus = (offset: number) => {\n    let newFocus = focusIndex + offset;\n    newFocus = Math.max(0, newFocus);\n    newFocus = Math.min(newFocus, options.length);\n    setFocusIndex(newFocus);\n  };\n\n  return (\n    <div className=\"select-panel\" role=\"listbox\" onKeyDown={handleKeyDown}>\n      {!disableSearch && (\n        <div className={SelectSearchContainer}>\n          <input\n            autoFocus={focusSearchOnOpen}\n            placeholder={getString(\"search\", overrideStrings)}\n            type=\"search\"\n            aria-describedby={getString(\"search\", overrideStrings)}\n            onChange={handleSearchChange}\n            onFocus={handleSearchFocus}\n          />\n        </div>\n      )}\n\n      {hasSelectAll && !searchText && (\n        <SelectItem\n          focused={focusIndex === 0}\n          checked={selectAllLength === value.length}\n          option={selectAllOption}\n          onSelectionChanged={selectAllChanged}\n          onClick={() => handleItemClicked(0)}\n          itemRenderer={ItemRenderer}\n          disabled={disabled}\n        />\n      )}\n\n      <SelectList\n        {...props}\n        options={filteredOptions()}\n        focusIndex={focusIndex - 1}\n        onClick={(_e, index) => handleItemClicked(index + 1)}\n        ItemRenderer={ItemRenderer}\n        disabled={disabled}\n      />\n    </div>\n  );\n};\n\nexport default SelectPanel;\n","import React from \"react\";\n\nexport default function Arrow({ expanded = false }) {\n  return (\n    <span\n      className=\"dropdown-heading-dropdown-arrow gray\"\n      style={{ paddingTop: \"4px\" }}\n    >\n      <svg\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"24\"\n        height=\"24\"\n        fill=\"none\"\n        stroke=\"currentColor\"\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth=\"2\"\n        viewBox=\"0 0 24 24\"\n      >\n        {expanded ? (\n          <polyline points=\"18 15 12 9 6 15\"></polyline>\n        ) : (\n          <path d=\"M6 9L12 15 18 9\"></path>\n        )}\n      </svg>\n    </span>\n  );\n}\n","import { css } from \"goober\";\nimport React from \"react\";\n\nconst Spinner = css({\n  animation: \"rotate 2s linear infinite\",\n\n  \"& .path\": {\n    stroke: \"var(--rmsc-border)\",\n    strokeWidth: \"4px\",\n    strokeLinecap: \"round\",\n    animation: \"dash 1.5s ease-in-out infinite\",\n  },\n\n  \"@keyframes rotate\": {\n    \"100%\": {\n      transform: \"rotate(360deg)\",\n    },\n  },\n\n  \"@keyframes dash\": {\n    \"0%\": {\n      strokeDasharray: \"1, 150\",\n      strokeDashoffset: \"0\",\n    },\n    \"50%\": {\n      strokeDasharray: \"90, 150\",\n      strokeDashoffset: \"-35\",\n    },\n    \"100%\": {\n      strokeDasharray: \"90, 150\",\n      strokeDashoffset: \"-124\",\n    },\n  },\n});\n\nfunction Loading({ size = 26 }) {\n  return (\n    <div\n      style={{\n        cursor: \"pointer\",\n        display: \"table-cell\",\n        verticalAlign: \"middle\",\n        width: size,\n        marginRight: \"0.2rem\",\n      }}\n    >\n      <svg\n        width={size}\n        height={size}\n        className={Spinner}\n        viewBox=\"0 0 50 50\"\n        style={{ display: \"inline-block\", verticalAlign: \"middle\" }}\n      >\n        <circle cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" className=\"path\"></circle>\n      </svg>\n    </div>\n  );\n}\n\nexport default Loading;\n","/**\n * A generic dropdown component.  It takes the children of the component\n * and hosts it in the component.  When the component is selected, it\n * drops-down the contentComponent and applies the contentProps.\n */\nimport useOutsideClick from \"@rooks/use-outside-click\";\nimport { css } from \"goober\";\nimport React, { useRef, useState, useEffect } from \"react\";\n\nimport Arrow from \"./arrow\";\nimport Loading from \"./loading\";\n\ninterface IDropdownProps {\n  children?;\n  contentComponent;\n  contentProps: object;\n  isLoading?: boolean;\n  disabled?: boolean;\n  shouldToggleOnHover?: boolean;\n  labelledBy?: string;\n  onMenuToggle?;\n  ArrowRenderer?;\n}\n\nconst PanelContainer = css({\n  position: \"absolute\",\n  zIndex: 1,\n  top: \"100%\",\n  width: \"100%\",\n  paddingTop: \"8px\",\n  \".panel-content\": {\n    maxHeight: \"300px\",\n    overflowY: \"auto\",\n    borderRadius: \"var(--rmsc-border-radius)\",\n    backgroundColor: \"var(--rmsc-background)\",\n    boxShadow:\n      \"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)\",\n  },\n});\n\nconst DropdownContainer = css({\n  position: \"relative\",\n  outline: \"none\",\n  backgroundColor: \"var(--rmsc-background)\",\n  border: \"1px solid var(--rmsc-border)\",\n  borderRadius: \"var(--rmsc-border-radius)\",\n  \"&:focus-within\": {\n    boxShadow: \"var(--rmsc-primary) 0px 0px 0px 1px\",\n    borderColor: \"var(--rmsc-primary)\",\n  },\n});\n\nconst DropdownHeading = css({\n  position: \"relative\",\n  padding: \"0 var(--rmsc-spacing)\",\n  display: \"flex\",\n  alignItems: \"center\",\n  justifyContent: \"flex-end\",\n  overflow: \"hidden\",\n  width: \"100%\",\n  height: \"var(--rmsc-height)\",\n  cursor: \"default\",\n  outline: \"none\",\n  \".dropdown-heading-value\": {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    flex: \"1\",\n  },\n});\n\nconst Dropdown = ({\n  children,\n  contentComponent: ContentComponent,\n  contentProps,\n  isLoading,\n  disabled,\n  shouldToggleOnHover,\n  labelledBy,\n  onMenuToggle,\n  ArrowRenderer,\n}: IDropdownProps) => {\n  const [expanded, setExpanded] = useState(false);\n  const [hasFocus, setHasFocus] = useState(false);\n  const FinalArrow = ArrowRenderer || Arrow;\n\n  const wrapper: any = useRef();\n\n  useOutsideClick(wrapper, () => setExpanded(false));\n\n  /* eslint-disable react-hooks/exhaustive-deps */\n  useEffect(() => {\n    onMenuToggle && onMenuToggle(expanded);\n  }, [expanded]);\n\n  const handleKeyDown = (e) => {\n    switch (e.which) {\n      case 27: // Escape\n      case 38: // Up Arrow\n        setExpanded(false);\n        break;\n      case 13: // Enter Key\n      case 40: // Down Arrow\n        setExpanded(true);\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  };\n  const handleHover = (iexpanded: boolean) => {\n    shouldToggleOnHover && setExpanded(iexpanded);\n  };\n  const handleFocus = (e) => {\n    e.target === wrapper && !hasFocus && setHasFocus(true);\n  };\n  const handleBlur = () => hasFocus && setHasFocus(false);\n  const handleMouseEnter = () => handleHover(true);\n  const handleMouseLeave = () => handleHover(false);\n  const toggleExpanded = () =>\n    setExpanded(isLoading || disabled ? false : !expanded);\n\n  return (\n    <div\n      tabIndex={0}\n      className={`${DropdownContainer} dropdown-container`}\n      aria-labelledby={labelledBy}\n      aria-expanded={expanded}\n      aria-readonly=\"true\"\n      aria-disabled={disabled}\n      ref={wrapper}\n      onKeyDown={handleKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      <div\n        className={`${DropdownHeading} dropdown-heading`}\n        onClick={toggleExpanded}\n      >\n        <div className=\"dropdown-heading-value\">{children}</div>\n        {isLoading && <Loading />}\n        <FinalArrow expanded={expanded} />\n      </div>\n      {expanded && (\n        <div className={`${PanelContainer} dropdown-content`}>\n          <div className=\"panel-content\">\n            <ContentComponent {...contentProps} />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import React from \"react\";\n\nimport getString from \"../lib/get-string\";\n\nconst DropdownHeader = ({ value, options, valueRenderer, overrideStrings }) => {\n  const noneSelected = value.length === 0;\n  const allSelected = value.length === options.length;\n  const customText = valueRenderer && valueRenderer(value, options);\n\n  const getSelectedText = () => value.map((s) => s.label).join(\", \");\n\n  if (noneSelected) {\n    return (\n      <span className=\"gray\">\n        {customText || getString(\"selectSomeItems\", overrideStrings)}\n      </span>\n    );\n  }\n\n  return (\n    <span>\n      {customText\n        ? customText\n        : allSelected\n        ? getString(\"allItemsAreSelected\", overrideStrings)\n        : getSelectedText()}\n    </span>\n  );\n};\n\nexport default DropdownHeader;\n","import { css } from \"goober\";\nimport React from \"react\";\n\nimport { ISelectProps } from \"../lib/interfaces\";\nimport SelectPanel from \"../select-panel\";\nimport Dropdown from \"./dropdown\";\nimport DropdownHeader from \"./header\";\n\nconst MultiSelectBox = css({\n  \"--rmscPrimary\": \"#4285f4\",\n  \"--rmscHover\": \"#f1f3f5\",\n  \"--rmscSelected\": \"#e2e6ea\",\n  \"--rmscBorder\": \"#ccc\",\n  \"--rmscGray\": \"#aaa\",\n  \"--rmscBackground\": \"#fff\",\n  \"--rmscSpacing\": \"10px\",\n  \"--rmscBorderRadius\": \"4px\",\n  \"--rmscHeight\": \"38px\",\n\n  \"*\": {\n    boxSizing: \"border-box\",\n    transition: \"all 0.2s ease\",\n  },\n  \".gray\": {\n    color: \"var(--rmsc-gray)\",\n  },\n});\n\nconst MultiSelect = ({\n  focusSearchOnOpen = true,\n  hasSelectAll = true,\n  shouldToggleOnHover = false,\n  className = \"multi-select\",\n  options,\n  value,\n  valueRenderer,\n  overrideStrings,\n  onChange,\n  disabled,\n  ItemRenderer,\n  ArrowRenderer,\n  selectAllLabel,\n  isLoading,\n  disableSearch,\n  filterOptions,\n  labelledBy,\n  onMenuToggle,\n}: ISelectProps) => {\n  const nvalue = value || [];\n  return (\n    <div className={`${MultiSelectBox} ${className}`}>\n      <Dropdown\n        isLoading={isLoading}\n        contentComponent={SelectPanel}\n        shouldToggleOnHover={shouldToggleOnHover}\n        contentProps={{\n          ItemRenderer,\n          options,\n          value: nvalue,\n          hasSelectAll,\n          selectAllLabel,\n          onChange,\n          disabled,\n          disableSearch,\n          focusSearchOnOpen,\n          filterOptions,\n          overrideStrings,\n        }}\n        disabled={disabled}\n        labelledBy={labelledBy}\n        onMenuToggle={onMenuToggle}\n        ArrowRenderer={ArrowRenderer}\n      >\n        <DropdownHeader\n          value={nvalue}\n          options={options}\n          valueRenderer={valueRenderer}\n          overrideStrings={overrideStrings}\n        />\n      </Dropdown>\n    </div>\n  );\n};\n\nexport default MultiSelect;\n"]},"metadata":{},"sourceType":"module"}