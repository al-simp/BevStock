{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React from\"react\";import{useEffect,useState}from\"react\";import _ from\"lodash\";import{toast}from\"react-toastify\";var ProcessDelivery=function ProcessDelivery(){//declare products as an empty array\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),quantities=_useState6[0],setQuantities=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isProcessing=_useState8[0],setIsProcessing=_useState8[1];var dateString=Date().toString();//boolean to indicate whether there has been a change in the products array\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),productsChange=_useState10[0],setProductsChange=_useState10[1];var stocktake=localStorage.getItem(\"laststocktake\");var addNewStock=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event,product){var item,quantityInput,tempQuantity,body,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();item=product.product_stocklist_id;quantityInput=document.getElementById(product.product_stocklist_id);tempQuantity=quantityInput.value;console.log(item,tempQuantity);_context.prev=5;body={item:item,stocktake:stocktake,tempQuantity:tempQuantity};console.log(body);_context.next=10;return fetch(\"/stocktake/count\",{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(body)});case 10:response=_context.sent;_context.next=13;return response.json();case 13:toast.success(\"Added Succesfully\");_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](5);console.error(_context.t0.message);case 19:case\"end\":return _context.stop();}}},_callee,null,[[5,16]]);}));return function addNewStock(_x,_x2){return _ref.apply(this,arguments);};}();//get the products that are under the new stock list\nvar getProducts=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,parseRes;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch(\"/stocktake/processdelivery/\".concat(localStorage.getItem(\"laststocktake\")),{method:\"GET\",headers:{token:localStorage.token}});case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:parseRes=_context2.sent;console.log(\"hello\");setProducts(parseRes);_context2.next=13;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,11]]);}));return function getProducts(){return _ref2.apply(this,arguments);};}();var filteredProducts=products.filter(function(item){return item.product_name.toLowerCase().includes(search.toLowerCase());});useEffect(function(){getProducts();},[]);return/*#__PURE__*/React.createElement(\"main\",{role:\"main\",className:\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Process Delivery\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-9\"},/*#__PURE__*/React.createElement(\"input\",{className:\"form-control\",type:\"text\",placeholder:\"Search\",onChange:function onChange(e){return setSearch(e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"})),/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Product\"),/*#__PURE__*/React.createElement(\"th\",null,\"Size\"),/*#__PURE__*/React.createElement(\"th\",null,\"Category\"),/*#__PURE__*/React.createElement(\"th\",null,\"Quantity\"))),/*#__PURE__*/React.createElement(\"tbody\",null,filteredProducts.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product.product_stocklist_id},/*#__PURE__*/React.createElement(\"td\",null,product.product_name),/*#__PURE__*/React.createElement(\"td\",null,product.product_size),/*#__PURE__*/React.createElement(\"td\",null,product.product_category),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(e){addNewStock(e,product);}},/*#__PURE__*/React.createElement(\"input\",{id:\"\".concat(product.product_stocklist_id),className:\"form-control\",type:\"number\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\"},\"Add\"))));}))));};export default ProcessDelivery;","map":{"version":3,"sources":["C:/Users/alans/bevstock/client/src/components/inventory/ProcessDelivery.js"],"names":["React","useEffect","useState","_","toast","ProcessDelivery","products","setProducts","search","setSearch","quantities","setQuantities","isProcessing","setIsProcessing","dateString","Date","toString","productsChange","setProductsChange","stocktake","localStorage","getItem","addNewStock","event","product","preventDefault","item","product_stocklist_id","quantityInput","document","getElementById","tempQuantity","value","console","log","body","fetch","method","headers","JSON","stringify","response","json","success","error","message","getProducts","token","parseRes","filteredProducts","filter","product_name","toLowerCase","includes","e","target","map","product_size","product_category"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport _ from \"lodash\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst ProcessDelivery = () => {\r\n  //declare products as an empty array\r\n  const [products, setProducts] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [quantities, setQuantities] = useState([]);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const dateString = Date().toString();\r\n  //boolean to indicate whether there has been a change in the products array\r\n  const [productsChange, setProductsChange] = useState(false);\r\n  const stocktake = localStorage.getItem(\"laststocktake\");\r\n\r\n  const addNewStock = async (event, product) => {\r\n    event.preventDefault();\r\n    const item = product.product_stocklist_id;\r\n    const quantityInput = document.getElementById(product.product_stocklist_id);\r\n    const tempQuantity = quantityInput.value;\r\n    console.log(item, tempQuantity);\r\n    try {\r\n        const body = { item, stocktake, tempQuantity };\r\n        console.log(body);\r\n        const response = await fetch(\"/stocktake/count\", {\r\n          method: \"PUT\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(body),\r\n        });\r\n  \r\n        await response.json();\r\n        toast.success(\"Added Succesfully\");\r\n  \r\n      } catch (error) {\r\n        console.error(error.message);\r\n      }\r\n    };\r\n\r\n\r\n\r\n  //get the products that are under the new stock list\r\n  const getProducts = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        `/stocktake/processdelivery/${localStorage.getItem(\r\n          \"laststocktake\"\r\n        )}`,\r\n        {\r\n          method: \"GET\",\r\n          headers: { token: localStorage.token },\r\n        }\r\n      );\r\n      const parseRes = await response.json();\r\n      console.log(\"hello\");\r\n      setProducts(parseRes);\r\n    } catch (error) {}\r\n  };\r\n\r\n  const filteredProducts = products.filter((item) => {\r\n    return item.product_name.toLowerCase().includes(search.toLowerCase());\r\n  });\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n  }, []);\r\n\r\n  return (\r\n    <main role=\"main\" className=\"col-md-9 ml-sm-auto col-lg-10 pt-3 px-4\">\r\n      <h1>Process Delivery</h1>\r\n      <div className=\"row\">\r\n        <div className=\"col-9\">\r\n          <input\r\n            className=\"form-control\"\r\n            type=\"text\"\r\n            placeholder=\"Search\"\r\n            onChange={(e) => setSearch(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"col-2\"></div>\r\n      </div>\r\n      <table className=\"table table-striped table-sm\">\r\n        <thead>\r\n          <tr>\r\n            <th>Product</th>\r\n            <th>Size</th>\r\n            <th>Category</th>\r\n            <th>Quantity</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {filteredProducts.map((product) => (\r\n            <tr key={product.product_stocklist_id}>\r\n              <td>{product.product_name}</td>\r\n              <td>{product.product_size}</td>\r\n              <td>{product.product_category}</td>\r\n\r\n              <td>\r\n                <form\r\n                  onSubmit={(e) => {\r\n                    addNewStock(e, product);\r\n                  }}\r\n                >\r\n                  <input\r\n                    id={`${product.product_stocklist_id}`}\r\n                    className=\"form-control\"\r\n                    type=\"number\"\r\n                  ></input>\r\n                  <button className=\"btn btn-success\">Add</button>\r\n                </form>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default ProcessDelivery;\r\n"]},"metadata":{},"sourceType":"module"}