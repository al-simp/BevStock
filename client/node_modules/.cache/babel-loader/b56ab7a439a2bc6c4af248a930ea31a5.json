{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{toast}from\"react-toastify\";//components\nimport UserShowLists from\"./UserShowLists\";var UserStocktake=function UserStocktake(_ref){var setAuth=_ref.setAuth;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),stocktake=_useState2[0],setStocktake=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allLists=_useState4[0],setLists=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),listsChange=_useState6[0],setListsChange=_useState6[1];var stocktake_id=localStorage.getItem(\"stocktake\");var checkStocktake=function checkStocktake(){console.log(\"hello\");if(stocktake_id!==null){console.log(\"stocktake in progress\");setStocktake(true);}};var getLists=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,parseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/stocklists/\",{method:\"GET\",headers:{token:localStorage.token}});case 3:response=_context.sent;_context.next=6;return response.json();case 6:parseData=_context.sent;setLists(parseData);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);console.error(_context.t0.message);case 13:case\"end\":return _context.stop();}}},_callee,null,[[0,10]]);}));return function getLists(){return _ref2.apply(this,arguments);};}();var logout=function logout(e){e.preventDefault();localStorage.removeItem(\"token\");setAuth(false);toast.success(\"Logged out succsessfully!\");};useEffect(function(){checkStocktake();getLists();setListsChange(false);},[listsChange]);return/*#__PURE__*/React.createElement(\"main\",{role:\"main\"},/*#__PURE__*/React.createElement(\"div\",{className:\"jumbotron\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary float-right\",onClick:function onClick(e){return logout(e);}},\"Logout\"),/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"h1\",{className:\"display-3\"},\"Stock Areas\"))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(UserShowLists,{allLists:allLists,setListsChange:setListsChange,stocktake:stocktake,stocktake_id:stocktake_id})));};export default UserStocktake;","map":{"version":3,"sources":["C:/Users/alans/bevstock/client/src/user/UserStocktake.js"],"names":["React","useState","useEffect","toast","UserShowLists","UserStocktake","setAuth","stocktake","setStocktake","allLists","setLists","listsChange","setListsChange","stocktake_id","localStorage","getItem","checkStocktake","console","log","getLists","fetch","method","headers","token","response","json","parseData","error","message","logout","e","preventDefault","removeItem","success"],"mappings":"udAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,OAASC,KAAT,KAAsB,gBAAtB,CAEA;AACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CAEA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,MAAiB,IAAdC,CAAAA,OAAc,MAAdA,OAAc,eACHL,QAAQ,CAAC,KAAD,CADL,wCAC9BM,SAD8B,eACnBC,YADmB,8BAERP,QAAQ,CAAC,EAAD,CAFA,yCAE9BQ,QAF8B,eAEpBC,QAFoB,8BAGCT,QAAQ,CAAC,KAAD,CAHT,yCAG9BU,WAH8B,eAGjBC,cAHiB,eAKrC,GAAMC,CAAAA,YAAY,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAArB,CAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CAC3BC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACA,GAAIL,YAAY,GAAK,IAArB,CAA2B,CACzBI,OAAO,CAACC,GAAR,CAAY,uBAAZ,EACAV,YAAY,CAAC,IAAD,CAAZ,CACD,CACF,CAND,CAQA,GAAMW,CAAAA,QAAQ,2FAAG,gMAEUC,CAAAA,KAAK,CAAC,cAAD,CAAiB,CAC3CC,MAAM,CAAE,KADmC,CAE3CC,OAAO,CAAE,CAAEC,KAAK,CAAET,YAAY,CAACS,KAAtB,CAFkC,CAAjB,CAFf,QAEPC,QAFO,qCAOWA,CAAAA,QAAQ,CAACC,IAAT,EAPX,QAOPC,SAPO,eAQbhB,QAAQ,CAACgB,SAAD,CAAR,CARa,iFAUbT,OAAO,CAACU,KAAR,CAAc,YAAIC,OAAlB,EAVa,qEAAH,kBAART,CAAAA,QAAQ,2CAAd,CAcA,GAAMU,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,CAAD,CAAO,CACpBA,CAAC,CAACC,cAAF,GACAjB,YAAY,CAACkB,UAAb,CAAwB,OAAxB,EACA1B,OAAO,CAAC,KAAD,CAAP,CACAH,KAAK,CAAC8B,OAAN,CAAc,2BAAd,EACD,CALD,CAOA/B,SAAS,CAAC,UAAM,CACdc,cAAc,GACdG,QAAQ,GACRP,cAAc,CAAC,KAAD,CAAd,CACD,CAJQ,CAIN,CAACD,WAAD,CAJM,CAAT,CAMA,mBACE,4BAAM,IAAI,CAAC,MAAX,eACE,2BAAK,SAAS,CAAC,WAAf,eACE,8BACE,SAAS,CAAC,6BADZ,CAEE,OAAO,CAAE,iBAACmB,CAAD,QAAOD,CAAAA,MAAM,CAACC,CAAD,CAAb,EAFX,WADF,cAOE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,WAAd,gBADF,CAPF,CADF,cAYE,4CACE,oBAAC,aAAD,EAAe,QAAQ,CAAErB,QAAzB,CAAmC,cAAc,CAAEG,cAAnD,CAAmE,SAAS,CAAEL,SAA9E,CAAyF,YAAY,CAAEM,YAAvG,EADF,CAZF,CADF,CAkBD,CA5DD,CA8DA,cAAeR,CAAAA,aAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nimport { toast } from \"react-toastify\";\r\n\r\n//components\r\nimport UserShowLists from \"./UserShowLists\";\r\n\r\nconst UserStocktake = ({ setAuth }) => {\r\n  const [stocktake, setStocktake] = useState(false);\r\n  const [allLists, setLists] = useState([]);\r\n  const [listsChange, setListsChange] = useState(false);\r\n\r\n  const stocktake_id = localStorage.getItem(\"stocktake\");\r\n\r\n  const checkStocktake = () => {\r\n    console.log(\"hello\")\r\n    if (stocktake_id !== null) {\r\n      console.log(\"stocktake in progress\");\r\n      setStocktake(true);\r\n    }\r\n  };\r\n\r\n  const getLists = async () => {\r\n    try {\r\n      const response = await fetch(\"/stocklists/\", {\r\n        method: \"GET\",\r\n        headers: { token: localStorage.token },\r\n      });\r\n\r\n      const parseData = await response.json();\r\n      setLists(parseData);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const logout = (e) => {\r\n    e.preventDefault();\r\n    localStorage.removeItem(\"token\");\r\n    setAuth(false);\r\n    toast.success(\"Logged out succsessfully!\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkStocktake();\r\n    getLists();\r\n    setListsChange(false);\r\n  }, [listsChange]);\r\n\r\n  return (\r\n    <main role=\"main\">\r\n      <div className=\"jumbotron\">\r\n        <button\r\n          className=\"btn btn-primary float-right\"\r\n          onClick={(e) => logout(e)}\r\n        >\r\n          Logout\r\n        </button>\r\n        <div className=\"container\">\r\n          <h1 className=\"display-3\">Stock Areas</h1>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <UserShowLists allLists={allLists} setListsChange={setListsChange} stocktake={stocktake} stocktake_id={stocktake_id}/>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default UserStocktake;\r\n"]},"metadata":{},"sourceType":"module"}