{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alans\\\\Bevstock\\\\client\\\\src\\\\components\\\\stocktaking\\\\QrScan.js\";\nimport React, { Fragment } from \"react\";\n\nconst QrScan = () => {\n  const qrcode = window.qrcode;\n  const video = document.createElement(\"video\");\n  const canvasElement = document.getElementById(\"qr-canvas\");\n  const canvas = canvasElement.getContext(\"2d\");\n  const qrResult = document.getElementById(\"qr-result\");\n  const outputData = document.getElementById(\"outputData\");\n  const btnScanQR = document.getElementById(\"btn-scan-qr\");\n  let scanning = false;\n\n  qrcode.callback = res => {\n    if (res) {\n      outputData.innerText = res;\n      scanning = false;\n      video.srcObject.getTracks().forEach(track => {\n        track.stop();\n      });\n      qrResult.hidden = false;\n      btnScanQR.hidden = false;\n      canvasElement.hidden = true;\n    }\n  };\n\n  btnScanQR.onclick = () => navigator.mediaDevices.getUserMedia({\n    video: {\n      facingMode: \"environment\"\n    }\n  }).then(function (stream) {\n    scanning = true;\n    qrResult.hidden = true;\n    btnScanQR.hidden = true;\n    canvasElement.hidden = false;\n    video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\n\n    video.srcObject = stream;\n    video.play();\n    tick();\n    scan();\n  });\n\n  function tick() {\n    canvasElement.height = video.videoHeight;\n    canvasElement.width = video.videoWidth;\n    canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\n    scanning && requestAnimationFrame(tick);\n  }\n\n  function scan() {\n    try {\n      qrcode.decode();\n    } catch (e) {\n      setTimeout(scan, 300);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"head\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"link\", {\n    rel: \"stylesheet\",\n    href: \"../styles/styles.css\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \"QR Code Scanner\"), /*#__PURE__*/React.createElement(\"a\", {\n    id: \"btn-scan-qr\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"canvas\", {\n    hidden: \"\",\n    id: \"qr-canvas\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"qr-result\",\n    hidden: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, \"Data: \"), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    id: \"outputData\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(\"script\", {\n    src: \"qrCodeReader.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"script\", {\n    src: \"https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default QrScan;","map":{"version":3,"sources":["C:/Users/alans/Bevstock/client/src/components/stocktaking/QrScan.js"],"names":["React","Fragment","QrScan","qrcode","window","video","document","createElement","canvasElement","getElementById","canvas","getContext","qrResult","outputData","btnScanQR","scanning","callback","res","innerText","srcObject","getTracks","forEach","track","stop","hidden","onclick","navigator","mediaDevices","getUserMedia","facingMode","then","stream","setAttribute","play","tick","scan","height","videoHeight","width","videoWidth","drawImage","requestAnimationFrame","decode","e","setTimeout"],"mappings":"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","sourcesContent":["import React, { Fragment } from \"react\";\r\n\r\nconst QrScan = () => {\r\n  const qrcode = window.qrcode;\r\n\r\n  const video = document.createElement(\"video\");\r\n  const canvasElement = document.getElementById(\"qr-canvas\");\r\n  const canvas = canvasElement.getContext(\"2d\");\r\n\r\n  const qrResult = document.getElementById(\"qr-result\");\r\n  const outputData = document.getElementById(\"outputData\");\r\n  const btnScanQR = document.getElementById(\"btn-scan-qr\");\r\n\r\n  let scanning = false;\r\n\r\n  qrcode.callback = (res) => {\r\n    if (res) {\r\n      outputData.innerText = res;\r\n      scanning = false;\r\n\r\n      video.srcObject.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n\r\n      qrResult.hidden = false;\r\n      btnScanQR.hidden = false;\r\n      canvasElement.hidden = true;\r\n    }\r\n  };\r\n\r\n  btnScanQR.onclick = () =>\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: { facingMode: \"environment\" } })\r\n      .then(function (stream) {\r\n        scanning = true;\r\n        qrResult.hidden = true;\r\n        btnScanQR.hidden = true;\r\n        canvasElement.hidden = false;\r\n        video.setAttribute(\"playsinline\", true); // required to tell iOS safari we don't want fullscreen\r\n        video.srcObject = stream;\r\n        video.play();\r\n        tick();\r\n        scan();\r\n      });\r\n\r\n  function tick() {\r\n    canvasElement.height = video.videoHeight;\r\n    canvasElement.width = video.videoWidth;\r\n    canvas.drawImage(video, 0, 0, canvasElement.width, canvasElement.height);\r\n\r\n    scanning && requestAnimationFrame(tick);\r\n  }\r\n\r\n  function scan() {\r\n    try {\r\n      qrcode.decode();\r\n    } catch (e) {\r\n      setTimeout(scan, 300);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <head>\r\n        <meta\r\n          name=\"viewport\"\r\n          content=\"width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;\"\r\n        />\r\n      </head>\r\n      <link rel=\"stylesheet\" href=\"../styles/styles.css\"></link>\r\n      <div id=\"container\">\r\n        <h1>QR Code Scanner</h1>\r\n\r\n        <a id=\"btn-scan-qr\">\r\n          <img src=\"https://dab1nmslvvntp.cloudfront.net/wp-content/uploads/2017/07/1499401426qr_icon.svg\" />\r\n        </a>\r\n        <canvas hidden=\"\" id=\"qr-canvas\"></canvas>\r\n\r\n        <div id=\"qr-result\" hidden=\"\">\r\n          <b>Data: </b> <span id=\"outputData\"></span>\r\n        </div>\r\n      </div>\r\n      <script src=\"qrCodeReader.js\"></script>\r\n      <script src=\"https://rawgit.com/sitepoint-editors/jsqrcode/master/src/qr_packed.js\"></script>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default QrScan;\r\n"]},"metadata":{},"sourceType":"module"}