{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\alans\\\\bevstock\\\\client\\\\src\\\\components\\\\stocktaking\\\\AssignList.js\";\nimport React, { Fragment, useState, useEffect } from \"react\";\n\nconst AssignList = ({\n  name,\n  stocklist_id,\n  setListsChange\n}) => {\n  const [users, setUsers] = useState([]);\n  const stocktake_id = localStorage.getItem(\"stocktake\");\n\n  const getTeamMembers = async () => {\n    try {\n      const response = await fetch(\"http://localhost:5000/teammanagement/users\", {\n        method: \"GET\"\n      });\n      const parseRes = await response.json();\n      setUsers(parseRes);\n    } catch (error) {\n      console.error(error.message);\n    }\n  };\n\n  async function assignToUser(event, user) {\n    event.preventDefault();\n    const userMessage = document.getElementById(user.user_id).value;\n    console.log(user, userMessage);\n    const id = user.user_id;\n    const modal = document.getElementById(\"id${stocklist_id}\");\n    modal.setAttribute(\"style\", \"display: none\");\n    const modalBackdrops = document.getElementsByClassName(\"modal-backdrop\");\n    document.body.removeChild(modalBackdrops[0]);\n\n    try {\n      const body = {\n        stocklist_id,\n        stocktake_id,\n        id,\n        userMessage\n      };\n      const response = await fetch(\"http://localhost:5000/stocklists/assignlist\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      });\n      await response.json();\n      setListsChange(true);\n    } catch (error) {\n      console.error(error.message);\n    }\n  }\n\n  useEffect(() => {\n    getTeamMembers();\n  }, []);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-info\",\n    \"data-toggle\": \"modal\",\n    \"data-target\": `#id${stocklist_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, \"Assign\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal\",\n    id: `id${stocklist_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-dialog\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"modal-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 15\n    }\n  }, name)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 19\n    }\n  }, \"Name\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 19\n    }\n  }, \"Message\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  }, users.map(user => /*#__PURE__*/React.createElement(\"tr\", {\n    key: user.user_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, user.user_name), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: e => {\n      assignToUser(e, user);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"form-control\",\n    id: `${user.user_id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success float-right\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 29\n    }\n  }, \"Assign\"))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-success\",\n    \"data-dismiss\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, \"Close\"))))));\n};\n\nexport default AssignList;","map":{"version":3,"sources":["C:/Users/alans/bevstock/client/src/components/stocktaking/AssignList.js"],"names":["React","Fragment","useState","useEffect","AssignList","name","stocklist_id","setListsChange","users","setUsers","stocktake_id","localStorage","getItem","getTeamMembers","response","fetch","method","parseRes","json","error","console","message","assignToUser","event","user","preventDefault","userMessage","document","getElementById","user_id","value","log","id","modal","setAttribute","modalBackdrops","getElementsByClassName","body","removeChild","headers","JSON","stringify","map","user_name","e"],"mappings":"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","sourcesContent":["import React, { Fragment, useState, useEffect } from \"react\";\r\n\r\nconst AssignList = ({ name, stocklist_id, setListsChange }) => {\r\n  const [users, setUsers] = useState([]);\r\n  const stocktake_id = localStorage.getItem(\"stocktake\");\r\n\r\n  const getTeamMembers = async () => {\r\n    try {\r\n      const response = await fetch(\r\n        \"http://localhost:5000/teammanagement/users\",\r\n        {\r\n          method: \"GET\",\r\n        }\r\n      );\r\n\r\n      const parseRes = await response.json();\r\n      setUsers(parseRes);\r\n    } catch (error) {\r\n      console.error(error.message);\r\n    }\r\n  };\r\n\r\n  async function assignToUser(event, user) {\r\n    event.preventDefault();\r\n    const userMessage = document.getElementById(user.user_id).value;\r\n    console.log(user, userMessage);\r\n    const id = user.user_id;\r\n\r\n    const modal = document.getElementById(\"id${stocklist_id}\");\r\n\r\n    modal.setAttribute(\"style\", \"display: none\");\r\n    const modalBackdrops = document.getElementsByClassName(\"modal-backdrop\");\r\n    document.body.removeChild(modalBackdrops[0]);\r\n\r\n    try {\r\n      const body = { stocklist_id, stocktake_id, id, userMessage };\r\n      const response = await fetch(\r\n        \"http://localhost:5000/stocklists/assignlist\",\r\n        {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n          body: JSON.stringify(body),\r\n        }\r\n      );\r\n      await response.json();\r\n      setListsChange(true);\r\n    } catch (error) {\r\n      console.error(error.message);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    getTeamMembers();\r\n  }, []);\r\n\r\n  return (\r\n    <Fragment>\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-info\"\r\n        data-toggle=\"modal\"\r\n        data-target={`#id${stocklist_id}`}\r\n      >\r\n        Assign\r\n      </button>\r\n      <div className=\"modal\" id={`id${stocklist_id}`}>\r\n        <div className=\"modal-dialog\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h4 className=\"modal-title\">{name}</h4>\r\n            </div>\r\n            <div className=\"modal-body\"></div>\r\n            <table className=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>Name</th>\r\n                  <th>Message</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {users.map((user) => (\r\n                  <tr key={user.user_id}>\r\n                    <td>{user.user_name}</td>\r\n                    <td>\r\n                      <form\r\n                        onSubmit={(e) => {\r\n                          assignToUser(e, user);\r\n                        }}\r\n                      >\r\n                        <div className=\"row\">\r\n                          <div className=\"col-7\">\r\n                            <textarea\r\n                              className=\"form-control\"\r\n                              id={`${user.user_id}`}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col\">\r\n                            <button\r\n                              className=\"btn btn-success float-right\"\r\n                              type=\"submit\"\r\n                            >\r\n                              Assign\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <div className=\"modal-footer\">\r\n              <button className=\"btn btn-success\" data-dismiss=\"modal\">\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default AssignList;\r\n"]},"metadata":{},"sourceType":"module"}